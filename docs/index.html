<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stuart Deets">

<title>Topic Modeling &amp; r/foodstamps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Topic Modeling &amp; r/foodstamps</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#what-is-food-stampssnap" id="toc-what-is-food-stampssnap" class="nav-link" data-scroll-target="#what-is-food-stampssnap">What is food stamps/SNAP?</a></li>
  <li><a href="#administrative-burden" id="toc-administrative-burden" class="nav-link" data-scroll-target="#administrative-burden">Administrative burden</a></li>
  <li><a href="#takeaways-from-snap-program-design" id="toc-takeaways-from-snap-program-design" class="nav-link" data-scroll-target="#takeaways-from-snap-program-design">Takeaways from SNAP program design</a></li>
  </ul></li>
  <li><a href="#what-is-rfoodstamps" id="toc-what-is-rfoodstamps" class="nav-link" data-scroll-target="#what-is-rfoodstamps">What is r/foodstamps?</a>
  <ul class="collapse">
  <li><a href="#why-is-this-of-interest-to-technical-communicators" id="toc-why-is-this-of-interest-to-technical-communicators" class="nav-link" data-scroll-target="#why-is-this-of-interest-to-technical-communicators">Why is this of interest to technical communicators?</a></li>
  </ul></li>
  <li><a href="#characterizing-the-data" id="toc-characterizing-the-data" class="nav-link" data-scroll-target="#characterizing-the-data">Characterizing the data</a>
  <ul class="collapse">
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research questions</a>
  <ul class="collapse">
  <li><a href="#about-topic-modeling" id="toc-about-topic-modeling" class="nav-link" data-scroll-target="#about-topic-modeling">About topic modeling</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the data</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data">Importing data</a></li>
  <li><a href="#cleaning-data-a-lot-of-cleaning" id="toc-cleaning-data-a-lot-of-cleaning" class="nav-link" data-scroll-target="#cleaning-data-a-lot-of-cleaning">Cleaning data (a lot of cleaning)</a></li>
  <li><a href="#subsetting-california-data" id="toc-subsetting-california-data" class="nav-link" data-scroll-target="#subsetting-california-data">Subsetting California data</a></li>
  <li><a href="#weird-data-sidebar" id="toc-weird-data-sidebar" class="nav-link" data-scroll-target="#weird-data-sidebar">Weird data sidebar</a></li>
  <li><a href="#making-some-tokens-doing-some-pruning-of-docs" id="toc-making-some-tokens-doing-some-pruning-of-docs" class="nav-link" data-scroll-target="#making-some-tokens-doing-some-pruning-of-docs">Making some tokens, doing some pruning of docs</a></li>
  <li><a href="#topic-modeling-on-that-sweet-sweet-california-data." id="toc-topic-modeling-on-that-sweet-sweet-california-data." class="nav-link" data-scroll-target="#topic-modeling-on-that-sweet-sweet-california-data.">Topic modeling on that sweet, sweet California data.</a>
  <ul class="collapse">
  <li><a href="#finding-k" id="toc-finding-k" class="nav-link" data-scroll-target="#finding-k">Finding K</a>
  <ul class="collapse">
  <li><a href="#making-some-plots-that-will-help-us-find-an-interesting-k" id="toc-making-some-plots-that-will-help-us-find-an-interesting-k" class="nav-link" data-scroll-target="#making-some-plots-that-will-help-us-find-an-interesting-k">Making some plots that will help us find an interesting K</a></li>
  </ul></li>
  <li><a href="#picking-a-k-number" id="toc-picking-a-k-number" class="nav-link" data-scroll-target="#picking-a-k-number">Picking a K number</a></li>
  </ul></li>
  <li><a href="#running-the-topic-model" id="toc-running-the-topic-model" class="nav-link" data-scroll-target="#running-the-topic-model">Running the topic model</a>
  <ul class="collapse">
  <li><a href="#plotting-the-topic-model" id="toc-plotting-the-topic-model" class="nav-link" data-scroll-target="#plotting-the-topic-model">Plotting the topic model</a></li>
  </ul></li>
  <li><a href="#estimate-effect" id="toc-estimate-effect" class="nav-link" data-scroll-target="#estimate-effect">Estimate effect</a>
  <ul class="collapse">
  <li><a href="#outputting-some-basic-charts" id="toc-outputting-some-basic-charts" class="nav-link" data-scroll-target="#outputting-some-basic-charts">Outputting some basic charts</a></li>
  <li><a href="#saving-top-features" id="toc-saving-top-features" class="nav-link" data-scroll-target="#saving-top-features">Saving top features</a></li>
  </ul></li>
  <li><a href="#making-charts-that-are-helpful" id="toc-making-charts-that-are-helpful" class="nav-link" data-scroll-target="#making-charts-that-are-helpful">Making charts that are helpful</a>
  <ul class="collapse">
  <li><a href="#bar-chart" id="toc-bar-chart" class="nav-link" data-scroll-target="#bar-chart">Bar chart</a>
  <ul class="collapse">
  <li><a href="#topic-2" id="toc-topic-2" class="nav-link" data-scroll-target="#topic-2">Topic 2</a></li>
  <li><a href="#topic-6" id="toc-topic-6" class="nav-link" data-scroll-target="#topic-6">Topic 6</a></li>
  <li><a href="#topic-9" id="toc-topic-9" class="nav-link" data-scroll-target="#topic-9">Topic 9</a></li>
  <li><a href="#topic-11" id="toc-topic-11" class="nav-link" data-scroll-target="#topic-11">Topic 11</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#importance" id="toc-importance" class="nav-link" data-scroll-target="#importance">Importance</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Topic Modeling &amp; r/foodstamps</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Stuart Deets </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<section id="what-is-food-stampssnap" class="level2">
<h2 class="anchored" data-anchor-id="what-is-food-stampssnap">What is food stamps/SNAP?</h2>
<p>SNAP stands for Supplemental Nutrition Assistance Program. - Administered state by state; different states have different rules. It is funded by the US Department of Agriculture. - Formerly known as food stamps, today typically an electronic debit-card style, while it used to be true that it was literally distributed as <a href="https://www.nytimes.com/2010/01/22/arts/design/22stamps.html">stamps</a><br>
- Goal: reduce hunger</p>
<p>It is a <a href="https://en.wikipedia.org/wiki/Means_test">means-tested program</a>, which means that if an individual makes above a certain threshold of income, they will receive reduced benefits, or are even no longer eligible to receive any money. Because of the means-tested nature of the benefit, this means that there are significant <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwiTioDI-ZSDAxVakYkEHYk-BuEQFnoECA4QAw&amp;url=https%3A%2F%2Fwww.brookings.edu%2Fwp-content%2Fuploads%2F2016%2F06%2F03_food_stamp_isaacs.pdf&amp;usg=AOvVaw3nbEPFdOUZqaTBoQRjGfcH&amp;opi=89978449">administrative costs on governments</a> at nearly 15.8 cents of administrative costs per dollar of benefits disbursed. Moreover, these costs are also borne by program participants, who must navigate and deal with the demands of eligibility workers and policymakers.</p>
<p>While the goal of the program is to <a href="https://corporatefinanceinstitute.com/resources/accounting/income-smoothing/">smooth the income</a> of individuals and families, because people’s income varies over time, there are significant information and administrative problems associated with the program. For instance, consider someone whose job lays them off in March but is rehired by a new business in May, so they are out of work for about 2 1/2 months. During those months, they do not have any income. Because it takes time for the paperwork to process, they may not receive benefits for a few weeks or even a few months after applying to SNAP. Yet, because they are hired in May, they are then no longer eligible for benefits. Depending on the state, they likely have to fill out paperwork each month verifying their income levels. Ideally, this would solve the problem. However, some SNAP participants experience painful <a href="https://www.bu.edu/articles/2023/social-security-clawbacks-are-a-year-round-horror/">“clawbacks”</a> in which the government takes money back from welfare recepients because the government overpaid the benefits.</p>
<p>Moreover, because of the complicated nature of the program and the eligibility requirements, which include meeting with caseworkers and submitting paperwork, there are high information and administrative issues on the governmental side, as well as adverse outcomes. In California, economic analyses indicate that even when SNAP participants are removed from the program for non-compliance, <a href="http://www.nber.org/papers/w27311.pdf">they often return as soon as the next month</a> as their “true” eligibility has not changed. This highlights the “administrative burden” that SNAP participants face in the program.</p>
<p>Additionally, SNAP benefits are disbursed on a specific day of the month in different states.</p>
</section>
<section id="administrative-burden" class="level2">
<h2 class="anchored" data-anchor-id="administrative-burden">Administrative burden</h2>
<p>Administrative burden is the idea that the burdens that citizens face can influence policy outcomes. <a href="https://www-jstor-org.ezp2.lib.umn.edu/stable/10.7758/9781610448789">Herd &amp; Moynihan (2018)</a> have identified that there are three major types of burdens: - <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/pam.22178">Learning costs</a>. These are incurred by users of government programs as they have to learn how to navigate the program. It is sometimes called an “evaluation” cost, or even a “search” cost. - <a href="https://doi.org/10.1093/jopart/muaa042">Psychological costs</a>. These are borne by citizens from stigma, loss of autonomy, or frustration, and also general stress at dealing with obtuse government systems. - <a href="https://doi.org/10.1093/jopart/muu009">Compliance costs</a>. These are the costs that it takes to comply with a particular rule or regulation, including the travel costs, but is more generally understood as the “provision of information or documentation to document standing.” Each of these different costs is distinct, but there are also overlaps. Addressing administrative burden has become an initative of the <a href="https://www.whitehouse.gov/omb/information-regulatory-affairs/burden-reduction-initiative/">Biden administration</a> and the Office of Management and Budget, and the Office of Information &amp; Regulatory Affairs.</p>
</section>
<section id="takeaways-from-snap-program-design" class="level2">
<h2 class="anchored" data-anchor-id="takeaways-from-snap-program-design">Takeaways from SNAP program design</h2>
<ul>
<li>Administrative burden is present in the program. Means-testing exacerbates the issue</li>
<li>Scholars are studying SNAP for its administrative burden</li>
<li><a href="https://www.fns.usda.gov/snap/monthly-issuance-schedule-all-states-and-territories">SNAP benefits are disbursed on specific days</a>, see link for the full list state by state</li>
</ul>
</section>
</section>
<section id="what-is-rfoodstamps" class="level1">
<h1>What is r/foodstamps?</h1>
<p>This subreddit was created late 2014 to be <a href="https://www.reddit.com/r/foodstamps/">“A place for food stamp (aka SNAP or EBT) applicants/recipients to ask questions about the program; for food stamp program experts to share information; and to share any news pertinent to the program”</a>. Users of the subreddit typically post about an issue that they are having with the program, ranging from the seemingly mundane to the urgent. Because of the low-income nature of SNAP recepients, users and posters are often in a tough spot, and they often feel that they are in a unique situation because of some factor in their case. They may also post about issues that they are having with their <a href="https://www.reddit.com/r/foodstamps/comments/18j9zxx/savings_limits_and_calfresh_snap_eligibility_in_ca/">eligibility</a>, about things like <a href="https://www.reddit.com/r/foodstamps/comments/18jjfat/today_the_15th_i_checked_my_mail_and_found_a/">missing their meeting with their caseworker</a>, or even if <a href="https://www.reddit.com/r/foodstamps/comments/18jx6b3/was_my_account_hacked/">their account was hacked</a>.</p>
<p>In short, posters are engaging in information requests and information sharing outside of more traditional settings. Examples of more traditional settings would include the <a href="https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/programs-and-services/supplemental-nutrition-assistance-program.jsp">MN Dept. of Human Services</a>, their <a href="https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/a-z/">A-Z list of resources</a>, their <a href="https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/resources/snap-faqs.jsp">FAQ</a> or the SNAP hotline 651-431-4050 in the Twin Cities metro area or 800-657-3698 in greater MN.</p>
<p>The fact that posters in r/foodstamps are reaching out in these non-traditional and non-“strategic” challenges may indicate that these more traditional sites of information are not meeting all of the needs of participants. Patterns within these posts could indicate areas of improvement for strategic communications and communication from the government to citizens, or even suggest that institutions in charge of communicating with SNAP participants may benefit from participating themselves within these forums in more formalized ways.</p>
<p>Additionally, <a href="https://www.reddit.com/r/foodstamps/comments/18iz5cv/comment/kdgelu1/?utm_source=share&amp;utm_medium=web2x&amp;context=3">users are encouraged to share within their post the state that they are posting from, so that other users can offer better help and advice</a>. This encouragement is shared by an auto-moderator or bot. This is important because eligibility and rules differ from state to state, and is important for scholars like me interested in studying the subreddit. This is because we will not want to study many states at once, but will want to search within the subreddit for particular states.</p>
<section id="why-is-this-of-interest-to-technical-communicators" class="level2">
<h2 class="anchored" data-anchor-id="why-is-this-of-interest-to-technical-communicators">Why is this of interest to technical communicators?</h2>
<p>Technical communicators are interested in communicating around complex, technical documents and information. And <a href="https://www.taylorfrancis.com/books/9780429583773">they are also committed in many ways to social justice and to improving outcomes in equitable ways</a>. If technical communicators could improve the way that governments communicate to SNAP recipients, that would be a good thing!</p>
<p>This project is informed by the ongoing conversation within the discipline around Tactical Technical Communcation (TTC). TTC is differentiated within this area of inquiry from “strategic” communciations, drawing on de Certeau’s distinction between the strategic and the tactical:</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>A tactic differs from a strategy in that it lacks a place or “property,” relying instead on action in the “cracks” between “proprietary powers”: “It poaches in them. It creates surprises in them. It can be where it is least expected. It is a guileful ruse. In short, a tactic is an art of the weak” (de Certeau, 1984, p.&nbsp;37).</p>
</div>
</div>
<p>Important examples within technical and professional communication of scholars studying TTC include, but is not limited to: - Colton, J. S., Holmes, S., &amp; Walwema, J. (2017). From NoobGuides to #OpKKK: Ethics of Anonymous’ Tactical Technical Communication. Technical Communication Quarterly, 26(1), 59–75. https://doi.org/10.1080/10572252.2016.1257743</p>
<ul>
<li><p>Edenfield, A. C. (2019). Queering consent: Design and sexual consent messaging. Communication Design Quarterly, 7(2), 50–63. https://doi.org/10.1145/3358931.3358938</p></li>
<li><p>Edenfield, A. C. (2021). Managing Gender Care in Precarity: Trans Communities Respond to COVID-19. Journal of Business and Technical Communication, 35(1), 15–21. https://doi.org/10.1177/1050651920958504</p></li>
<li><p>Edenfield, A. C., Holmes, S., &amp; Colton, J. S. (2019). Queering Tactical Technical Communication: DIY HRT. Technical Communication Quarterly, 28(3), 177–191. https://doi.org/10.1080/10572252.2019.1607906</p></li>
<li><p>Holladay, D. (2017). Classified Conversations: Psychiatry and Tactical Technical Communication in Online Spaces. Technical Communication Quarterly, 26(1), 8–24. https://doi.org/10.1080/10572252.2016.1257744</p></li>
<li><p>Kimball, M. A. (2006). Cars, Culture, and Tactical Technical Communication. Technical Communication Quarterly, 15(1), 67–86. https://doi.org/10.1207/s15427625tcq1501_6</p></li>
<li><p>Kimball, M. A. (2017). Tactical Technical Communication. Technical Communication Quarterly, 26(1), 1–7. https://doi.org/10.1080/10572252.2017.1259428</p></li>
<li><p>Peter, H. A. S.-S. (2017). “Make a Bomb in the Kitchen of Your Mom”: Jihadist Tactical Technical Communication and the Everyday Practice of Cooking. Technical Communication Quarterly, 26(1), 76–91. https://doi.org/10.1080/10572252.2016.1275862</p></li>
</ul>
<p>These articles, starting with Kimball’s “Cars, Culture, and Tactical Technical Communication,” discuss the ways that users seek to navigate power systems and find dynamic ways to generate solutions. For instance, in the original Kimball article, the main focus is users who are interested in fixing their cars themselves. Today, however, in conjunction with the social justice turn, scholars have pointed out the ways that queer people use tactical technical communication, or even how users repond to psychiatric diagnoses.</p>
<p>Arguably, we can see tactical technical communication happening in r/foodstamps, in which users practice “an art of the weak” as they navigate between cracks in strategic communication by the government or non-profits. While individual users may be assigned “flairs” or special tags in their profile that indicate when they comment about their role, such as “SNAP policy expert” or “<a href="https://www.reddit.com/r/foodstamps/comments/18jsejw/comment/kdmbanp/?utm_source=share&amp;utm_medium=web2x&amp;context=3">SNAP eligibility expert - STATE</a>”, it is still the case that users are turning to the subreddit in order to navigate between the cracks of more formalized systems.</p>
<p>An important question that remains, then, is how to characterize the nature of the TTC that is happening on r/foodstamps. Importantly, all of the previous approaches to understanding tactical technical communication have taken a much more qualitative approach, characterized by interviews and close reading. Therefore, as this Quarto website uses a computational approach, it offers a novel way to think about and analyze tactical technical communication.</p>
</section>
</section>
<section id="characterizing-the-data" class="level1">
<h1>Characterizing the data</h1>
<p>There are many possible ways to potentially understand the posts on r/foodstamps, from qualitative to computational. Ultimately, given the size of the data that is possible (over 8000 posts), and the phenomena of interest, I chose to use computational techniques, including topic modeling, to understand the data.</p>
<p>Moreover, because of the size of the data and because of the nature of SNAP, I chose to focus on the state of California. I did this for several reasons: - California is the largest state and has the greatest number of SNAP recipients - All of the states which had clearer and cleaner disbursement deadlines were very small states. For instance, the state of Connecticut only had 25 observations across nearly 8000 posts. Other small states were similar. Meanwhile, California distributes benefits from the 1st to the 10th, which is relatively clean and condensed. Additionally, because of the mechanism by which they choose when to distribute benefits to who (based on the last digit of the case number) it does not seem likely that there are other variables likely to affect when an individual would receive their benefit, and so cases would be evenly distributed over the 10 days of disbursement.</p>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research questions</h2>
<ul>
<li>Does the composition of topics change over time for posts about California?</li>
<li>How do they do so?</li>
<li>Do the topics vary based on the day of the month and the number of days it has been since SNAP benefits were disbursed?</li>
</ul>
<p>The answers to these questions are important, because if it is true that the composition of topics varies based on the number of days it has been since SNAP benefits were disbursed, that could indicate that users were turning to the subreddit as they experience problems with their disbursement or eligibility.</p>
<p>Consider for example one potential story of a poster, who expected to receive their EBT money on the 3rd of the month. It is now the 5th, so he posts on the subreddit asking a few questions hoping to receive an answer. On the other hand, consider another potential story about a poster who is asking about the backlog of cases. Often, caseworkers fall behind in their verification checks, sometimes up to <a href="https://www.reddit.com/r/foodstamps/comments/188g178/psa_for_texas_snap/">120 days behind</a>. A user who was caught up in the backlog could post at any time of the month to seek out additional information about when their application was likely to be processed, and may not be more likely to post at a particular time of the month.</p>
<section id="about-topic-modeling" class="level3">
<h3 class="anchored" data-anchor-id="about-topic-modeling">About topic modeling</h3>
<p>Conveniently, topic modeling can pick up on the different types of words that people use, and sort them into probabilities. After looking at a lot of posts, a topic model can suggest that the two stories I laid out are likely to belong to different topics. Then, if the proportion of topics is very different on the 10th day of the month than, say, the 20th, that could indicate that when users experience specific problems, they turn to the subreddit.</p>
<p>It is important to point out the limitations of this approach, as well. A topic model can do a good job of so-called “distant reading,” but it does not do a good job of picking up ideas and concepts that a close reading approach done by a human is able to understand.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://www.tidytextmining.com/topicmodeling.html">Topic modeling is a method for unsupervised classification of such documents, similar to clustering on numeric data, which finds natural groups of items even when we’re not sure what we’re looking for</a>.</p>
</div>
</div>
<p>What a topic model does is understand the words that are in a document, in our case, a post, using a <a href="https://cbail.github.io/SICSS_Topic_Modeling.html">“bag of words” approach</a> that is more able to understand how words are “<a href="https://cbail.github.io/SICSS_Topic_Modeling.html">dependent on the broader context that they are used in natural language</a>”. Then, the topic model asks the human, “how many categories or topics do you think that there are?” After making this choice, the model then figures out which words are likely to appear within the same document. It’s then likely that, for documents where there is some overlap in terms of the words that they use, are more likely to be similar than documents that don’t use the same words. This is expressed as a “probability” that a particular document belongs in a particular category. Taking the top probability for each document, we can then graph how the aggregation of these probabilities changes over time, based on how many days it has been since SNAP began to disburse.</p>
<p>What this approach is <em>not</em> is it is not “the truth” or some other perfect representation of reality. It is a flawed computer program designed by a flawed human, so it should not be taken as an ideal representation of r/foodstamps. It would be perfectly possible to look at 8000 posts and do a qualitative analysis of these posts, sorting them, tagging them, and categorizing them by hand. This would be an equally reasonable and perhaps more interesting and more <em>valid</em> way of approaching this data.</p>
<p>However, given the size of the data, it’s much quicker to run a topic model than it is to develop a qualitative coding schema, so this is a reasonable first pass at this, and can allow for the generation of insights that can be developed further through interviews and more qualitative approaches.</p>
</section>
</section>
</section>
<section id="about-the-data" class="level1">
<h1>About the data</h1>
<p>The data in this case is post data and metadata from r/foodstamps. Initially and for the development of the code, I used the package in Rstudio called <a href="https://github.com/ivan-rivera/RedditExtractor">RedditExtractoR</a>. This allowed for easy and convenient access to data when I was starting out. Unfortunately, given Reddit’s API limits, this approach was limited to essentially the most recent 1000 posts. After running the package twice about a month apart, I was left with around 1300 posts, which left around 200 posts that mentioned the state of California.</p>
<p>However, given the fact that I was interested in a longitudinal look at the data, I knew that I needed additional data. Therefore, after some Googling, <a href="https://www.reddit.com/r/pushshift/comments/11ef9if/separate_dump_files_for_the_top_20k_subreddits/">I found this post on Reddit</a> which described how to get larger data sets online for the top 20k subreddits, of which r/foodstamps was fortunately one. After taking a quick tutorial in torrenting from my future sister-in-law, I downloaded Qtorrent, got a .zst file, and extracted it to find a very messed up JSON file. I used <a href="https://jsonlint.com/">JSONlint.com</a> to try and figure out what was wrong, and I discovered that every single line of the data was missing a comma. So copied and pasted the data into Excel, added a column that contained a comma, and merged the two together, resulting in JSON data that was functionable and readable by R through the package jsonlite.</p>
<p>What follows is annotation and description of the code that was used to produce the results.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any problems with the code are my fault and my fault alone. Viewer discretion advised. I am certain that there were cleaner and more reproducible ways that I could have created this if I knew how.</p>
</div>
</div>
</section>
<section id="importing-data" class="level1">
<h1>Importing data</h1>
<p>Here, I am importing data from JSON into Rstudio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite) <span class="co"># handy package for loading and reading in JSON data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># I just always install it </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter()  masks stats::filter()
✖ purrr::flatten() masks jsonlite::flatten()
✖ dplyr::lag()     masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing JSON data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">"~/Documents/GitHub/8520 Final Project/output/data/foodstamps_submissions.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cleaning-data-a-lot-of-cleaning" class="level1">
<h1>Cleaning data (a lot of cleaning)</h1>
<p>In this case, a lot of the data (nearly all of the columns) is metadata of the posts. A lot of the posts simply don’t have all the attributes, and aren’t relevant to this study.</p>
<p>For instance, a video post includes metadata about the video, but that’s not the case for all of the posts. That explains why there are so many columns. However, some of the rows in columns that we are actually interested in don’t have any data in them. Let’s replace that data with NA so that we know what’s up with those rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(json_data)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cleaning data, fixing rows which do not have data</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>author <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>author, <span class="fu">is.na</span>(json_data<span class="sc">$</span>author), <span class="cn">NA</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>url <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>url, <span class="fu">is.na</span>(json_data<span class="sc">$</span>url), <span class="cn">NA</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>created <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>created, <span class="fu">is.na</span>(json_data<span class="sc">$</span>created), <span class="cn">NA</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>created_utc, <span class="fu">is.na</span>(json_data<span class="sc">$</span>created_utc), <span class="cn">NA</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>subreddit <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>subreddit, <span class="fu">is.na</span>(json_data<span class="sc">$</span>subreddit), <span class="cn">NA</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>title <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>title, <span class="fu">is.na</span>(json_data<span class="sc">$</span>title), <span class="cn">NA</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>permalink <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>permalink, <span class="fu">is.na</span>(json_data<span class="sc">$</span>permalink), <span class="cn">NA</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>selftext <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>selftext, <span class="fu">is.na</span>(json_data<span class="sc">$</span>selftext), <span class="cn">NA</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting columns I want to keep</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"author"</span>, <span class="st">"url"</span>, <span class="st">"created"</span>, <span class="st">"created_utc"</span>, <span class="st">"subreddit"</span>, <span class="st">"title"</span>, <span class="st">"permalink"</span>, <span class="st">"selftext"</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new data frame</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span> json_data <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(selected_columns))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dates were UNIX dates (the number of seconds since 1/1/1970), so I fought with Rstudio for probably an hour to get them into a human intelligible form:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating POSIX vector</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="fu">as.numeric</span>(cleaned_data<span class="sc">$</span>created), <span class="at">origin =</span> <span class="st">"1970-01-01"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting from UNIX to real dates</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># lubridate offers tidy ways of handling and dealing with dates</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(cleaned_data<span class="sc">$</span>created_utc)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as_datetime</span>(cleaned_data<span class="sc">$</span>created_utc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subsetting-california-data" class="level1">
<h1>Subsetting California data</h1>
<p>Before we do some topic modeling, we want to extract out only the data that references the state of California. California is the biggest state, has the greatest number of people on SNAP, and has by far the greatest number of posts referencing it. In order to understand the dynamics of the program, we have to understand the administration which happens at the state level. Because of this, I have chosen to take a state-by-state approach to this. This website focuses on California, but this work could be extended to other states in the future.</p>
<p>We will also do some additional cleaning. For instance, combining the title and text columns together to create a single column, “title_and_text.” I did this because the title may contain important information about the post, including the state data, as well as information that may help us to understand the topics within that post. (<a href="https://juliasilge.com/blog/evaluating-stm/">Julia Silge does this as well in this post</a>)</p>
<p>Then, I split the date-UTC column of the data into year, month, and day, each in separate columns. I did this so that we can focus on which day of the month the post was on. Again, if there are patterns in the topics based on the day of the month, that might indicate that users are turning to the subreddit in lieu of reaching out to the government for assistance.</p>
<p>Then, I searched the data for references to California. I used a wide variety of search terms in order to capture as many posts as possible that are posted about the California SNAP program, including slang, and the official name of the program, <a href="https://www.cdss.ca.gov/calfresh">CalFresh</a>. Then, we can de-duplicate because it seems likely that some posts may mention both “CalFresh” and “California,” for instance.</p>
<p>Mentioning this here again: California disburses SNAP money on the 1st through the 10th of the month, depending on the last digit of the citizen’s assigned case number. So if the last digit is 5, their benefits will be delivered on the 5th of the month.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sub-setting California json data, then running a topic model on that data</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>stm v1.3.6.1 successfully loaded. See ?stm for help. 
 Papers, resources, and other materials at structuraltopicmodel.com</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combining the title and text columns</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>raw_data_combined <span class="ot">&lt;-</span> <span class="fu">unite</span>(cleaned_data, title_and_text, title, selftext, <span class="at">sep =</span> <span class="st">" "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># separating the date utc column into month day year</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>raw_data_combined <span class="ot">&lt;-</span> <span class="fu">separate</span>(raw_data_combined,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">col =</span> created_utc,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 3 pieces. Additional pieces discarded in 23 rows [1, 2, 3, 4, 5, 6,
49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, ...].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing year, month, and day variable from characters into integers</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>year)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>month)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>day)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 3.3.1
Unicode version: 14.0
ICU version: 71.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: 8 of 8 threads used.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Searching the data for references to California</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>California_raw_1 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Calfresh"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>california_raw_2 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">" Cal "</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>California_raw_3 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"California"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>California_raw_4 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Cali"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>California_raw_5 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Los Angeles"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>California_raw_6 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"LA County"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># binding searches together into a single data set</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(California_raw_1, </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>                                   california_raw_2, </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>                                   California_raw_3, </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>                                   California_raw_4, </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>                                   California_raw_5, </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>                                   California_raw_6)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co"># removing posts that have been deleted from the dataset</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"deleted"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co"># For some freaking reason (it works in my other code) data is getting deleted when I do this. After trouble shooting for multiple hours I have given up on this and am bringing in data from my other project to fix the problem. </span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Documents/GitHub/8520 Final Project/output/data/California_raw_master"</span>)</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's make sure that we don't have any duplicates</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span> </span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title_and_text, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This results in just over 1000 posts, and 11 variables.</p>
</section>
<section id="weird-data-sidebar" class="level1">
<h1>Weird data sidebar</h1>
<p>Because of the format of the data, there were a lot of tokens that were using really really funky characters, like ǒ or ä. After exploring, I realized that these are some kind of artifact from apostrophes in the data. Let’s remove them after investigating, as they do not contain useful information for our topic model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploring weird data</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>weird <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"äôt"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(weird)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      author
1   eurcla44
2  SpicyK007
3  Mammmaa12
4  __zzZzz__
5 ColdSnow46
6  [deleted]
                                                                                                 url
1     https://www.reddit.com/r/foodstamps/comments/od50tw/what_is_this_calfresh_emergency_allotment/
2 https://www.reddit.com/r/foodstamps/comments/ofssrq/california_food_stamps_accidental_fraud_using/
3                 https://www.reddit.com/r/foodstamps/comments/ohp67z/my_first_time_having_calfresh/
4     https://www.reddit.com/r/foodstamps/comments/oj12my/california_what_do_i_do_now_that_i_have_a/
5                             https://www.reddit.com/r/foodstamps/comments/onvamj/calfresh_question/
6        https://www.reddit.com/r/foodstamps/comments/oyy824/got_denied_is_there_anyway_out_of_this/
  created year month day  subreddit
1      NA 2021     7   3 foodstamps
2      NA 2021     7   7 foodstamps
3      NA 2021     7  10 foodstamps
4      NA 2021     7  12 foodstamps
5      NA 2021     7  20 foodstamps
6      NA 2021     8   6 foodstamps
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           title_and_text
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             What is this Calfresh emergency allotment? (California) I was just recently approved for Calfresh food stamp benefits.  Because of my income, I wasn‚Äôt approval that much benefits.  I noticed my July payment was the paid out the maximum amount for my household size.  Was this an overpayment or is this the Covid emergency increase?  If so, how long will I‚Äôve getting the payment amount?  I would call the office but they are closed today .
2 California Food Stamps - Accidental Fraud Using Benefits in Other State 30+ Days TL // DR: Used CalFresh benefits for 6 months in another state due to close family friend needing assistance after cancer diagnosis. Now being investigated for fraud. Rude rep on phone interview. What‚Äôs gonna happen from here?\n\n\n\nOk so I was really stupid for not looking into the rules of EBT. I asked a friend on the phone and they said yes I could use in another state so I didn‚Äôt bother to look further into it. I know I was very wrong there. \n\nBack in April I received a call from super nice woman in fraud investigation informing me my account was flagged and in a perfect world I would‚Äôve notified her. I told her I wasn‚Äôt sure when I was coming back since everything was moment to moment with me even being out there in the first place aka unplanned af. \n\nIn an emotionless world based solely off facts and rules, I can understand how she had little patience for me and assumed I intentionally committed fraud. \n\nI guess I‚Äôm wondering now how the investigation process goes and what to expect from here? Will anything be sent to the address of my family friend? Am I eligible for EBT in the state I‚Äôm in now with a CA drivers license? ‚Äî out of state DL was part of the reason I didn‚Äôt apply for one out here. I wasn‚Äôt sure how the process worked with out of state DL and couldn‚Äôt get ahold of anyone at local EBT office without giving my personal info out and I didn‚Äôt want to be flagged for fraud by asking about out of state stuff. I know very little about gov benefits and I was afraid it would seem suspicious and auto flag. Clearly Uncle Sam makes me anxious üò©ü•¥\n\nThanks in advance üôè
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 My first time having calfresh So I recently got accepted to get cal fresh and my first add on was June 16 and was wondering when is my next deposit ? I know my case ends in 0 so shouldn‚Äôt it be today ? And nothing has been loaded
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              [CALIFORNIA] What do I do, now that I have a CalFresh (ebt) card? ~~I got a call to pick up my card so I went and did that. Now that I have it, what do I do? Do I need to activate it or anything?~~\n\n**Edit:** *after a ton of Google searches and no specific information for setting up a PIN, I finally realized I was skipping over the option, due to the muffled wording when I called. My application was expedited so I picked up the card right after my interview. So for anyone who didn‚Äôt get it in the mail, or simply confused on how to make/change a pin like me, here‚Äôs how.*\n\n1). Call +1 (877) 328-9677.\n\n2). Select language to continue (1 for English).\n\n3). Enter your 16 digit card number, followed by the # sign.\n\n**4). Select option 4.**\n\n5). Enter date of birth (ie. 01/01/95).\n\n6). Enter your SSN (social security number).\n\n7). Enter 4 digits to make a PIN. \n\n8). Repeat the 4 digits to confirm.\n\n9). Hang up. Get food.\n\n**10). Eat.**\n\n__*if you received your EBT card, but do not have a balance yet‚Äîgive it a few hours or wait until the next day. the amount may differ from what you‚Äôre eligible for, but don‚Äôt worry.*__
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         CalFresh question: I‚Äôm a college student and I was receiving food stamps during school year. No income and full time student, paying my own bills at my apartment. \n\nI picked up a full time summer job and I‚Äôm living at home (no bills). I was unable to report changes within 10 days due to mail not being received, not being able to log into the website and working M-F 8 hours a day. \n\nMy recertification interview is on Thursday &amp;amp; I plan to report these changes now, but will I get in trouble for it being past the 10 days? This isn‚Äôt really intentional fraud but I‚Äôm worried about how strict they‚Äôll be with me on this.\n\nThanks,\n\nCS
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Got denied, is there anyway out of this? So I‚Äôm from CA and really need some advice. I recently got denied CalFresh (basically food stamps) because I‚Äôm 21 but I still live with my parents. The case worker told me about this bullshit technicality that you have to be 22 to receive food stamps if you live with your parents. This really fucks me over though because I‚Äôm trying to save up to move out but I still have to pay for all my expenses while living at home and getting no support from my parents. The caseworker asked me if I lived with a parent and I said yes as there was nothing on the initial questionnaire that said anything about being denied because of that. And I would‚Äôve 100% received the support initially had I not ran into that question. Had I had known I would‚Äôve lied since I really need the support. I want to refile and try again but I don‚Äôt know if that‚Äôs a good idea since I‚Äôm now in the system and I‚Äôm not trying to deal with anything bullshit in the future if they‚Äôre really gonna make a big deal about it. Should I try refilling next month? Or just wait it out till my birthday to file again so I qualify? Thanks for any help.
                                                                             title
1                          What is this Calfresh emergency allotment? (California)
2 California Food Stamps - Accidental Fraud Using Benefits in Other State 30+ Days
3                                                    My first time having calfresh
4                [CALIFORNIA] What do I do, now that I have a CalFresh (ebt) card?
5                                                               CalFresh question:
6                                         Got denied, is there anyway out of this?
                                                                     permalink
1     /r/foodstamps/comments/od50tw/what_is_this_calfresh_emergency_allotment/
2 /r/foodstamps/comments/ofssrq/california_food_stamps_accidental_fraud_using/
3                 /r/foodstamps/comments/ohp67z/my_first_time_having_calfresh/
4     /r/foodstamps/comments/oj12my/california_what_do_i_do_now_that_i_have_a/
5                             /r/foodstamps/comments/onvamj/calfresh_question/
6        /r/foodstamps/comments/oyy824/got_denied_is_there_anyway_out_of_this/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                selftext
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    I was just recently approved for Calfresh food stamp benefits.  Because of my income, I wasn‚Äôt approval that much benefits.  I noticed my July payment was the paid out the maximum amount for my household size.  Was this an overpayment or is this the Covid emergency increase?  If so, how long will I‚Äôve getting the payment amount?  I would call the office but they are closed today .
2 TL // DR: Used CalFresh benefits for 6 months in another state due to close family friend needing assistance after cancer diagnosis. Now being investigated for fraud. Rude rep on phone interview. What‚Äôs gonna happen from here?\n\n\n\nOk so I was really stupid for not looking into the rules of EBT. I asked a friend on the phone and they said yes I could use in another state so I didn‚Äôt bother to look further into it. I know I was very wrong there. \n\nBack in April I received a call from super nice woman in fraud investigation informing me my account was flagged and in a perfect world I would‚Äôve notified her. I told her I wasn‚Äôt sure when I was coming back since everything was moment to moment with me even being out there in the first place aka unplanned af. \n\nIn an emotionless world based solely off facts and rules, I can understand how she had little patience for me and assumed I intentionally committed fraud. \n\nI guess I‚Äôm wondering now how the investigation process goes and what to expect from here? Will anything be sent to the address of my family friend? Am I eligible for EBT in the state I‚Äôm in now with a CA drivers license? ‚Äî out of state DL was part of the reason I didn‚Äôt apply for one out here. I wasn‚Äôt sure how the process worked with out of state DL and couldn‚Äôt get ahold of anyone at local EBT office without giving my personal info out and I didn‚Äôt want to be flagged for fraud by asking about out of state stuff. I know very little about gov benefits and I was afraid it would seem suspicious and auto flag. Clearly Uncle Sam makes me anxious üò©ü•¥\n\nThanks in advance üôè
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              So I recently got accepted to get cal fresh and my first add on was June 16 and was wondering when is my next deposit ? I know my case ends in 0 so shouldn‚Äôt it be today ? And nothing has been loaded
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ~~I got a call to pick up my card so I went and did that. Now that I have it, what do I do? Do I need to activate it or anything?~~\n\n**Edit:** *after a ton of Google searches and no specific information for setting up a PIN, I finally realized I was skipping over the option, due to the muffled wording when I called. My application was expedited so I picked up the card right after my interview. So for anyone who didn‚Äôt get it in the mail, or simply confused on how to make/change a pin like me, here‚Äôs how.*\n\n1). Call +1 (877) 328-9677.\n\n2). Select language to continue (1 for English).\n\n3). Enter your 16 digit card number, followed by the # sign.\n\n**4). Select option 4.**\n\n5). Enter date of birth (ie. 01/01/95).\n\n6). Enter your SSN (social security number).\n\n7). Enter 4 digits to make a PIN. \n\n8). Repeat the 4 digits to confirm.\n\n9). Hang up. Get food.\n\n**10). Eat.**\n\n__*if you received your EBT card, but do not have a balance yet‚Äîgive it a few hours or wait until the next day. the amount may differ from what you‚Äôre eligible for, but don‚Äôt worry.*__
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           I‚Äôm a college student and I was receiving food stamps during school year. No income and full time student, paying my own bills at my apartment. \n\nI picked up a full time summer job and I‚Äôm living at home (no bills). I was unable to report changes within 10 days due to mail not being received, not being able to log into the website and working M-F 8 hours a day. \n\nMy recertification interview is on Thursday &amp;amp; I plan to report these changes now, but will I get in trouble for it being past the 10 days? This isn‚Äôt really intentional fraud but I‚Äôm worried about how strict they‚Äôll be with me on this.\n\nThanks,\n\nCS
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          So I‚Äôm from CA and really need some advice. I recently got denied CalFresh (basically food stamps) because I‚Äôm 21 but I still live with my parents. The case worker told me about this bullshit technicality that you have to be 22 to receive food stamps if you live with your parents. This really fucks me over though because I‚Äôm trying to save up to move out but I still have to pay for all my expenses while living at home and getting no support from my parents. The caseworker asked me if I lived with a parent and I said yes as there was nothing on the initial questionnaire that said anything about being denied because of that. And I would‚Äôve 100% received the support initially had I not ran into that question. Had I had known I would‚Äôve lied since I really need the support. I want to refile and try again but I don‚Äôt know if that‚Äôs a good idea since I‚Äôm now in the system and I‚Äôm not trying to deal with anything bullshit in the future if they‚Äôre really gonna make a big deal about it. Should I try refilling next month? Or just wait it out till my birthday to file again so I qualify? Thanks for any help.</code></pre>
</div>
</div>
</section>
<section id="making-some-tokens-doing-some-pruning-of-docs" class="level1">
<h1>Making some tokens, doing some pruning of docs</h1>
<p>Now we will begin the tokenization process. We are removing punctuation, numbers, and URLs from the title_and_text variable in the data. We’ll also lower all of the text, and remove all stop words. While these words may have important rhetorical meaning, they are less relevant in this context, because what we are trying to do is see how topics may change over time.</p>
<p>We’ll also remove some of the weird words that were appearing, like äǒs, but we’ll also remove words corresponding to California. I did this because these are words that are not communicating new information to us about the data.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section <a href="https://burtmonroe.github.io/TextAsDataCourse/Tutorials/IntroSTM.nb.html">mostly follows this tutorial</a>, but it’s really a blend of many, many different tutorials. Many thanks to the people who put these together, I found them all very helpful!</p>
<ul>
<li><p>https://juliasilge.com/blog/evaluating-stm/</p></li>
<li><p>https://bookdown.enpchina.eu/PublicSphere_stm/PublicSphere_English.html#Topics_over_time</p></li>
<li><p>https://ds4cs.netlify.app/learning/text-as-data/the-power-of-text-as-data-topic-modeling-on-the-mostly-collected-works-of-marx-and-engels/</p></li>
<li><p>https://jayrobwilliams.com/files/html/teaching-materials/STM.html</p></li>
<li><p>https://cbail.github.io/SICSS_Topic_Modeling.html</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tokenization &amp; removing punctuation/numbers/URLs etc.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>tokens <span class="ot">&lt;-</span> California_raw_master<span class="sc">$</span>title_and_text <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens</span>(<span class="at">what =</span> <span class="st">"word"</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_url =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">#applying relative pruning</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(<span class="fu">dfm</span>(tokens), <span class="at">min_docfreq =</span> <span class="fl">0.005</span>, <span class="at">max_docfreq =</span> <span class="fl">0.99</span>, </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">docfreq_type =</span> <span class="st">"prop"</span>, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Removing features occurring: </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>  - in fewer than 5.03 documents: 3,985</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>  Total features removed: 3,985 (77.4%).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing some weird words</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">dfm_remove</span>(dfm, <span class="fu">c</span>(<span class="st">"amp"</span>, <span class="st">"$"</span>, <span class="st">"so"</span>, <span class="st">"t"</span>, <span class="st">"m"</span>, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"s"</span>, <span class="st">"cal"</span>,<span class="st">"calfresh"</span>,<span class="st">"california"</span>,<span class="st">"aot"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"äôt"</span>,<span class="st">"äôm"</span>,<span class="st">"äôs"</span>,<span class="st">"los"</span>,<span class="st">"county"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"#x200b"</span>, <span class="st">"="</span>, <span class="st">"sar7"</span>, <span class="st">"aos"</span>, <span class="st">"sar-7"</span>, <span class="st">"äô"</span>))</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting from DFM to STM</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>dfm_stm <span class="ot">&lt;-</span> <span class="fu">convert</span>(dfm, <span class="at">to =</span> <span class="st">"stm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="topic-modeling-on-that-sweet-sweet-california-data." class="level1">
<h1>Topic modeling on that sweet, sweet California data.</h1>
<p>Now that we have created some data that is ready to be fed into a structural topic model, we can begin to search for “K” or the number of topics that we want to sort documents into. This is a very important part of topic modeling, so we will run the model many times, varying the number of categories that the computer uses. Then, we will graph some key attributes of each number of categories, and make a qualitative decision about what is best. Some terms to understand: - Semantic coherence - Exclusivity</p>
<p>Semantic coherence “<a href="https://juliasilge.com/blog/evaluating-stm/">is maximized when the most probable words in a given topic frequently co-occur together</a>, and it basically tries to proxy for human judgement of the quality of topics. On the other hand, too much semantic coherence can mean that there are too few topics, and every topic is just a lot of really common words (<a href="https://dl.acm.org/doi/10.5555/2145432.2145462">read the original paper here</a>).</p>
<p>Exclusivity is the balance to coherence. It is a measure of how exclusive a topic is–so for the words that make up the topic, do they also rank highly in other topics? That could be an indication that the topics are not very <em>exclusive</em> and so additional topics would be beneficial for the analysis. On the other hand, too many topics will degrade the semantic coherence. Again it is a balance between the two, and there is not a single, correct choice.</p>
<section id="finding-k" class="level2">
<h2 class="anchored" data-anchor-id="finding-k">Finding K</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># topic topic modeling </span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">## searching for K</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>K <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>) <span class="co"># this is what allows us to vary the # of topics.</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Running the search (computationally intense, takes a long time)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">searchK</span>(dfm_stm<span class="sc">$</span>documents, dfm_stm<span class="sc">$</span>vocab, <span class="at">K =</span> K, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="making-some-plots-that-will-help-us-find-an-interesting-k" class="level3">
<h3 class="anchored" data-anchor-id="making-some-plots-that-will-help-us-find-an-interesting-k">Making some plots that will help us find an interesting K</h3>
<p>Well, that took a long time, and I’ve hidden the output of the code from the Quarto website because it’s just too long. If we do some plots and graphs, that will help us visualize the output from K.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create graph</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"K"</span> <span class="ot">=</span> K, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Coherence"</span> <span class="ot">=</span> <span class="fu">unlist</span>(fit<span class="sc">$</span>results<span class="sc">$</span>semcoh),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Exclusivity"</span> <span class="ot">=</span> <span class="fu">unlist</span>(fit<span class="sc">$</span>results<span class="sc">$</span>exclus))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>big_plot <span class="ot">&lt;-</span> plot <span class="co"># Saving this plot for later</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape to long format</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"reshape2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'reshape2'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tidyr':

    smiths</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">melt</span>(plot, <span class="at">id=</span><span class="fu">c</span>(<span class="st">"K"</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot result</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot, <span class="fu">aes</span>(K, value, <span class="at">color =</span> variable)) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>variable,<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of topics K"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Statistical fit of models with different K"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/K_graphs-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="picking-a-k-number" class="level2">
<h2 class="anchored" data-anchor-id="picking-a-k-number">Picking a K number</h2>
<p>Based on what we can see here, it seems like a good K number could be around 15. That would be a nice balance between coherence and exclusivity, two measures of a good K.</p>
</section>
</section>
<section id="running-the-topic-model" class="level1">
<h1>Running the topic model</h1>
<p>Let’s run the topic model with 15 topics. Additionally, one of the benefits of using structural topic modeling (stm package) is that we can specify a covariate that we’re interested in. We’ll choose the day variable, since that’s what will allow us to look at the day of the month and how that affects the topics (<a href="https://jayrobwilliams.com/files/html/teaching-materials/STM.html">I learned how to do this from this tutorial</a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>model_1 <span class="ot">&lt;-</span> <span class="fu">stm</span>(<span class="at">documents =</span> dfm_stm<span class="sc">$</span>documents,  <span class="at">vocab =</span> dfm_stm<span class="sc">$</span>vocab, <span class="at">K =</span> <span class="dv">15</span>, <span class="at">prevalence =</span> <span class="sc">~</span>California_raw_master<span class="sc">$</span>day, <span class="at">data =</span> California_raw_master, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="plotting-the-topic-model" class="level2">
<h2 class="anchored" data-anchor-id="plotting-the-topic-model">Plotting the topic model</h2>
<p>This basic plot brings up the top words that are a part of each topic. It’s not very cool or interesting looking, although it has a lot of information contained within it. Ultimately, it’s not what we are interested in but it’s still important to understand.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plotting_the_topic_model-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="estimate-effect" class="level1">
<h1>Estimate effect</h1>
<p>Estimate effect is a handy function that’s a part of STM that allows us to estimate the effect of a variable on the topics (<a href="https://rdrr.io/cran/stm/man/estimateEffect.html">link</a>). It’s important that the topic model that you ran earlier runs the same variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> <span class="fu">estimateEffect</span>(<span class="at">formula=</span><span class="sc">~</span>day, <span class="at">stmobj=</span>model_1, <span class="at">metadata=</span>California_raw_master)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="outputting-some-basic-charts" class="level2">
<h2 class="anchored" data-anchor-id="outputting-some-basic-charts">Outputting some basic charts</h2>
<p>Now we will try and split out some basic charts. They won’t look good, and they won’t get the job done. But they will be charts, and they will exist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># not beautiful plots of day of the month and topic</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(effect, <span class="st">"day"</span>, <span class="at">method =</span> <span class="st">"continuous"</span>, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">model =</span> model_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/outputting_some_basic_charts-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the X-axis with the specified order</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s add some stuff like labels to this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(effect, <span class="st">"day"</span>, <span class="at">method =</span> <span class="st">"continuous"</span>, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">model =</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>model_1, <span class="at">xlab =</span> <span class="st">"Day of the month"</span>, <span class="at">ylab =</span> <span class="st">"Expected topic proportion"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="at">printlegend =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="saving-top-features" class="level2">
<h2 class="anchored" data-anchor-id="saving-top-features">Saving top features</h2>
<p>In case we later want to return and do some qualitative analysis and thinking about the words, lets save the outputs of our model in a .csv file. We’ll focus on FREX words, since those are typically considered to be a nice balance between exclusivity and coherence within a topic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Save top 20 features across topics and forms of weighting </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>labels_1 <span class="ot">&lt;-</span> <span class="fu">labelTopics</span>(model_1, <span class="at">n=</span><span class="dv">15</span>) </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#only keep FREX weighting </span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>topwords_1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"features"</span> <span class="ot">=</span><span class="fu">t</span>(labels_1<span class="sc">$</span>frex)) </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#assign topic number as column name </span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(topwords_1) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Topics"</span>, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)) </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Return the result </span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>topwords_1[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Topics 1        Topics 2 Topics 3    Topics 4  Topics 5  Topics 6
1          bank            form     says         new    stamps    cancel
2     documents recertification approval          la      food    closed
3  verification             sar approved        move     house    relief
4          told             due     info     process    states      case
5        submit      employment  website       start   savings      file
6      accounts        services  checked     medical     place  calworks
7         fraud          social   status application insurance     filed
8    statements          submit      btw       state      best   hearing
9            äù            guys    fresh        snap     state     claim
10    submitted      work-study february       share    friend  counties
11         okay            send     mean      system       ssi    appeal
12       saving     benefitscal  account          id      dont     covid
13    literally            fill   notice  electronic     wants happening
14   submitting       statement   loaded    resident     years   general
15      savings              pa confused    personal    health    filing
       Topics 7  Topics 8     Topics 9  Topics 10 Topics 11  Topics 12
1  unemployment       irt          pin       call allotment        aid
2         march     limit         card    calling emergency  financial
3            ui reporting       number  interview   getting     affect
4         april    income        p-ebt        day     month   question
5           may    report transactions        try   deposit    college
6      payments    change          ebt     called        ea       year
7           owe     gross        cards      never  november disability
8  overissuance   changes          ago     office   maximum        don
9         extra    summer       stolen supervisor     extra      meals
10        count    within        enter     worker      date    whether
11    receiving threshold       reload       site   october    student
12          i’m    making        error      email    amount     grants
13         july        gt     customer       days       nov     scared
14        based      days     activate      phone      äôre      proof
15  overpayment increased        tried   uploaded  pandemic        hit
   Topics 13 Topics 14  Topics 15
1      items   parents       cash
2        buy      rent assistance
3     amazon     apply       lose
4        use   student        mom
5    walmart     grant      money
6    grocery  together unemployed
7  groceries    paying       much
8    balance     study    classes
9   delivery   qualify      cover
10       ebt   include      funds
11   program    family      stamp
12 remaining      live       jobs
13   reduced apartment     taking
14  eligible   husband  graduated
15      snap    school   planning</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>thoughts_topics_15 <span class="ot">&lt;-</span> <span class="fu">findThoughts</span>(<span class="at">model =</span> model_1,  California_raw_master<span class="sc">$</span>title_and_text,<span class="at">n=</span><span class="dv">1</span>, <span class="at">topics =</span> <span class="dv">1</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's write a CSV so we can return to these top words later and do some qualitative analysis</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(topwords_1, <span class="st">"topwords_15_topics"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="making-charts-that-are-helpful" class="level1">
<h1>Making charts that are helpful</h1>
<p>Let’s make some charts that will allow us to visualize things better. This first chart is pretty, but not that helpful.</p>
<section id="bar-chart" class="level2">
<h2 class="anchored" data-anchor-id="bar-chart">Bar chart</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># following this tutorial https://bookdown.enpchina.eu/PublicSphere_stm/PublicSphere_English.html#Topics_over_time</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>day_20 <span class="ot">&lt;-</span> stm<span class="sc">::</span><span class="fu">estimateEffect</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span> <span class="sc">~</span> day, model_1, <span class="at">meta=</span>California_raw_master)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>topicprop20<span class="ot">&lt;-</span><span class="fu">make.dt</span>(model_1, meta)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>topic20prop <span class="ot">&lt;-</span> topicprop20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>topic_proportion_per_year20 <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(topic20prop, <span class="at">by =</span> <span class="fu">list</span>(<span class="at">day =</span> California_raw_master<span class="sc">$</span>day), mean)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'reshape'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:reshape2':

    colsplit, melt, recast</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:lubridate':

    stamp</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    rename</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:tidyr':

    expand, smiths</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>vizDataFrame20y <span class="ot">&lt;-</span> <span class="fu">melt</span>(topic_proportion_per_year20, <span class="at">id.vars =</span> <span class="st">"day"</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>heat_palette <span class="ot">&lt;-</span> <span class="fu">heat.colors</span>(<span class="dv">20</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>palette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#2f4f4f"</span>, <span class="st">"#2e8b57"</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#800000"</span>, <span class="st">"#808000"</span>,<span class="st">"#000080"</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#ff0000"</span>,<span class="st">"#ff8c00"</span>,<span class="st">"#ffd700"</span>,<span class="st">"#00ff00"</span>,<span class="st">"#4169e1"</span>,<span class="st">"#00ffff"</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#00bfff"</span>,<span class="st">"#0000ff"</span>,<span class="st">"#da70d6"</span>,<span class="st">"#d8bfd8"</span>) <span class="co"># Colors picked using a color palette generator</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>moneyshot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(vizDataFrame20y, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>value, <span class="at">fill =</span> variable)) <span class="sc">+</span> </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"proportion"</span>) <span class="sc">+</span> </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> palette, <span class="at">name =</span> <span class="st">"Topic"</span>) <span class="sc">+</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"topics over the month in r/foodstamps"</span>, </span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Topic proportion over time (posts that mention California)"</span>) <span class="sc">+</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">31</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">31</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>))</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>moneyshot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/really_good_charts-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"moneyshot_15_topics.png"</span>, moneyshot, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>) <span class="co"># let's make sure to save the chart.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This chart is more helpful, but it gets hard to see all of the different topics. Still, it helps us to see which topics may change over the month. I got the idea for the facet wrap <a href="https://www.tidytextmining.com/topicmodeling.html">here</a> ## All topics line chart</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Line chart</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>moneyshot_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(vizDataFrame20y, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topics by day in r/foodstamps"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">"variable"</span>) </span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>moneyshot_1 <span class="ot">&lt;-</span> moneyshot_1 <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="co"># Adding a dashed line at the 10th day of the month when SNAP money in California stops being disbursed</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>moneyshot_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/line_chart_facet_wrap-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"money_shot_1_15_topics.png"</span>, moneyshot_1, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
</div>
<p>The charts that we are most interested in allow us to zoom in on a particular topic. So let’s do that! ## Line charts of individual topics ### Topic 1 Zooming in on topic 1. We are filtering our chart from above to focus on topic 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>topic_1 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic1$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>topic_1_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_1, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 1 by day in r/foodstamps"</span>,</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_1_chart_rdd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/topic_1_chart-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="topic-2" class="level3">
<h3 class="anchored" data-anchor-id="topic-2">Topic 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>topic_2 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic2$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>topic_2_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_2, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 2 by day in r/foodstamps"</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_2_chart_rdd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="topic-6" class="level3">
<h3 class="anchored" data-anchor-id="topic-6">Topic 6</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>topic_6 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic6$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>topic_6_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_6, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 6 by day in r/foodstamps"</span>,</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_6_chart_rdd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/topic_6_chart-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="topic-9" class="level3">
<h3 class="anchored" data-anchor-id="topic-9">Topic 9</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>topic_9 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic9$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>topic_9_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_9, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 9 by day in r/foodstamps"</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_9_chart_rdd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="topic-11" class="level3">
<h3 class="anchored" data-anchor-id="topic-11">Topic 11</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting out topic 11</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>topic_11 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic11$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>topic_11_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_11, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 11 by day in r/foodstamps"</span>,</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_11_chart_rdd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/topic_11_chart-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While I could share the graphs for every topic, I think that these results are highly suggestive that there is some variation happening within the month that is influenced by external variables. For instance, perhaps the results of some topics are higher as the month draws to a close and rent comes due. Additionally, it is highly suggested by the charts that some topics are more prevalent during the first ten days of the month, suggesting the influence of the disbursal date on the topics within the subreddit.</p>
<p>Moreover, rudimentary qualitative analysis of the different topics suggests that the topics are semantically coherent and suggestive of the different concerns that posters have. For instance, topic 9’s FREX words suggest concerns with verification, and topic 13’s suggest the concerns of students.</p>
<p>Regression discontinuity design may be one way to move this project forward, as it allows for the development of statistical methods to measure how a variable changes over time in response to another variable. It could be a good fit in this case since we know how and when within each month the SNAP benefits are disbursed. This would allow for saying with certainty the precise way in which the topics change over time during each month.</p>
<p>Ultimately, additional work needs to be done to qualitatively analyze the posts within each topic to understand each topic’s potential semantic meaning. Moreover, interviews with caseworkers and policy analysts who participate in the forum would be helpful in understanding how they perceive their role in the forum, and would contribute to the development of tactical technical communication as a concept.</p>
<p>Many businesses today, as well as technical communication as a discipline, are turning away from more formalized communications and towards user forums and documentation for issues. If it is indeed true that users are posting in r/foodstamps to receive assistance, it could be beneficial for states and government agencies to either participate in the forum themselves, or develop their own forums for users to post in.</p>
</section>
</section>
</section>
<section id="importance" class="level1">
<h1>Importance</h1>
<p>This project has highlighted how quantitative and computational approaches to social media data may be of use to technical communicators and government agencies. SNAP users are vulnerable and low-income, and may have recently experienced challenging life circumstances. It is therefore important to treat these users with respect and make their lives easier. SNAP benefits matter to them, and they help them make ends meet. Moreover, SNAP participation and uptake is associated with better <a href="https://www.cbpp.org/research/snap-is-linked-with-improved-nutritional-outcomes-and-lower-health-care-costs">life outcomes and lower health care costs</a>. If governments and agencies can improve SNAP take up and improve the efficiency of program administration, that may benefit the bottom line of states and the federal government through reduced spending on other programs.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb61" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Topic Modeling &amp; r/foodstamps"</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Stuart Deets"</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown: </span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: 72</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="fu">## What is food stamps/SNAP?</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>SNAP stands for Supplemental Nutrition Assistance Program. </span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Administered state by state; different states have different rules. It is funded by the US Department of Agriculture.</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Formerly known as food stamps, today typically an electronic debit-card style, while it used to be true that it was literally distributed as <span class="co">[</span><span class="ot">stamps</span><span class="co">](https://www.nytimes.com/2010/01/22/arts/design/22stamps.html)</span>  </span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Goal: reduce hunger</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>It is a <span class="co">[</span><span class="ot">means-tested program</span><span class="co">](https://en.wikipedia.org/wiki/Means_test)</span>, which means that if an individual makes above a certain threshold of income, they will receive reduced benefits, or are even no longer eligible to receive any money. Because of the means-tested nature of the benefit, this means that there are significant <span class="co">[</span><span class="ot">administrative costs on governments</span><span class="co">](https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwiTioDI-ZSDAxVakYkEHYk-BuEQFnoECA4QAw&amp;url=https%3A%2F%2Fwww.brookings.edu%2Fwp-content%2Fuploads%2F2016%2F06%2F03_food_stamp_isaacs.pdf&amp;usg=AOvVaw3nbEPFdOUZqaTBoQRjGfcH&amp;opi=89978449)</span> at nearly 15.8 cents of administrative costs per dollar of benefits disbursed. Moreover, these costs are also borne by program participants, who must navigate and deal with the demands of eligibility workers and policymakers. </span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>While the goal of the program is to <span class="co">[</span><span class="ot">smooth the income</span><span class="co">](https://corporatefinanceinstitute.com/resources/accounting/income-smoothing/)</span> of individuals and families, because people's income varies over time, there are significant information and administrative problems associated with the program. For instance, consider someone whose job lays them off in March but is rehired by a new business in May, so they are out of work for about 2 1/2 months. During those months, they do not have any income. Because it takes time for the paperwork to process, they may not receive benefits for a few weeks or even a few months after applying to SNAP. Yet, because they are hired in May, they are then no longer eligible for benefits. Depending on the state, they likely have to fill out paperwork each month verifying their income levels. Ideally, this would solve the problem. However, some SNAP participants experience painful <span class="co">[</span><span class="ot">"clawbacks"</span><span class="co">](https://www.bu.edu/articles/2023/social-security-clawbacks-are-a-year-round-horror/)</span> in which the government takes money back from welfare recepients because the government overpaid the benefits. </span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>Moreover, because of the complicated nature of the program and the eligibility requirements, which include meeting with caseworkers and submitting paperwork, there are high information and administrative issues on the governmental side, as well as adverse outcomes. In California, economic analyses indicate that even when SNAP participants are removed from the program for non-compliance, <span class="co">[</span><span class="ot">they often return as soon as the next month</span><span class="co">](http://www.nber.org/papers/w27311.pdf)</span> as their "true" eligibility has not changed. This highlights the "administrative burden" that SNAP participants face in the program.</span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>Additionally, SNAP benefits are disbursed on a specific day of the month in different states. </span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a><span class="fu">## Administrative burden </span></span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>Administrative burden is the idea that the burdens that citizens face can influence policy outcomes. <span class="co">[</span><span class="ot">Herd &amp; Moynihan (2018)</span><span class="co">](https://www-jstor-org.ezp2.lib.umn.edu/stable/10.7758/9781610448789)</span> have identified that there are three major types of burdens:</span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Learning costs</span><span class="co">](https://onlinelibrary.wiley.com/doi/abs/10.1002/pam.22178)</span>. These are incurred by users of government programs as they have to learn how to navigate the program. It is sometimes called an "evaluation" cost, or even a "search" cost. </span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Psychological costs</span><span class="co">](https://doi.org/10.1093/jopart/muaa042)</span>. These are borne by citizens from stigma, loss of autonomy, or frustration, and also general stress at dealing with obtuse government systems. </span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Compliance costs</span><span class="co">](https://doi.org/10.1093/jopart/muu009)</span>. These are the costs that it takes to comply with a particular rule or regulation, including the travel costs, but is more generally understood as the "provision of information or documentation to document standing."</span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>Each of these different costs is distinct, but there are also overlaps. Addressing administrative burden has become an initative of the <span class="co">[</span><span class="ot">Biden administration</span><span class="co">](https://www.whitehouse.gov/omb/information-regulatory-affairs/burden-reduction-initiative/)</span> and the Office of Management and Budget, and the Office of Information &amp; Regulatory Affairs. </span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Takeaways from SNAP program design</span></span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Administrative burden is present in the program. Means-testing exacerbates the issue</span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Scholars are studying SNAP for its administrative burden</span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">SNAP benefits are disbursed on specific days</span><span class="co">](https://www.fns.usda.gov/snap/monthly-issuance-schedule-all-states-and-territories)</span>, see link for the full list state by state</span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a><span class="fu"># What is r/foodstamps?</span></span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a>This subreddit was created late 2014 to be <span class="co">[</span><span class="ot">"A place for food stamp (aka SNAP or EBT) applicants/recipients to ask questions about the program; for food stamp program experts to share information; and to share any news pertinent to the program"</span><span class="co">](https://www.reddit.com/r/foodstamps/)</span>. Users of the subreddit typically post about an issue that they are having with the program, ranging from the seemingly mundane to the urgent. Because of the low-income nature of SNAP recepients, users and posters are often in a tough spot, and they often feel that they are in a unique situation because of some factor in their case. They may also post about issues that they are having with their <span class="co">[</span><span class="ot">eligibility</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/18j9zxx/savings_limits_and_calfresh_snap_eligibility_in_ca/)</span>, about things like <span class="co">[</span><span class="ot">missing their meeting with their caseworker</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/18jjfat/today_the_15th_i_checked_my_mail_and_found_a/)</span>, or even if <span class="co">[</span><span class="ot">their account was hacked</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/18jx6b3/was_my_account_hacked/)</span>. </span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a>In short, posters are engaging in information requests and information sharing outside of more traditional settings. Examples of more traditional settings would include the <span class="co">[</span><span class="ot">MN Dept. of Human Services</span><span class="co">](https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/programs-and-services/supplemental-nutrition-assistance-program.jsp)</span>, their <span class="co">[</span><span class="ot">A-Z list of resources</span><span class="co">](https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/a-z/)</span>, their <span class="co">[</span><span class="ot">FAQ</span><span class="co">](https://mn.gov/dhs/people-we-serve/adults/economic-assistance/food-nutrition/resources/snap-faqs.jsp)</span> or the SNAP hotline 651-431-4050 in the Twin Cities metro area or 800-657-3698 in greater MN. </span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a>The fact that posters in r/foodstamps are reaching out in these non-traditional and non-"strategic" challenges may indicate that these more traditional sites of information are not meeting all of the needs of participants. Patterns within these posts could indicate areas of improvement for strategic communications and communication from the government to citizens, or even suggest that institutions in charge of communicating with SNAP participants may benefit from participating themselves within these forums in more formalized ways.</span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a>Additionally, <span class="co">[</span><span class="ot">users are encouraged to share within their post the state that they are posting from, so that other users can offer better help and advice</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/18iz5cv/comment/kdgelu1/?utm_source=share&amp;utm_medium=web2x&amp;context=3)</span>. This encouragement is shared by an auto-moderator or bot. This is important because eligibility and rules differ from state to state, and is important for scholars like me interested in studying the subreddit. This is because we will not want to study many states at once, but will want to search within the subreddit for particular states. </span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## Why is this of interest to technical communicators?</span></span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a>Technical communicators are interested in communicating around complex, technical documents and information. And <span class="co">[</span><span class="ot">they are also committed in many ways to social justice and to improving outcomes in equitable ways</span><span class="co">](https://www.taylorfrancis.com/books/9780429583773)</span>. If technical communicators could improve the way that governments communicate to SNAP recipients, that would be a good thing!  </span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a>This project is informed by the ongoing conversation within the discipline around Tactical Technical Communcation (TTC). TTC is differentiated within this area of inquiry from "strategic" communciations, drawing on de Certeau's distinction between the strategic and the tactical:</span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-55"><a href="#cb61-55" aria-hidden="true" tabindex="-1"></a>::: {.callout-important}</span>
<span id="cb61-56"><a href="#cb61-56" aria-hidden="true" tabindex="-1"></a>A tactic differs from a strategy in that it lacks a place or “property,” relying instead on action in the “cracks” between “proprietary powers”: “It poaches in them. It creates surprises in them. It can be where it is least expected. It is a guileful ruse. In short, a tactic is an art of the weak” (de Certeau, 1984, p. 37).</span>
<span id="cb61-57"><a href="#cb61-57" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-58"><a href="#cb61-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-59"><a href="#cb61-59" aria-hidden="true" tabindex="-1"></a>Important examples within technical and professional communication of scholars studying TTC include, but is not limited to:</span>
<span id="cb61-60"><a href="#cb61-60" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Colton, J. S., Holmes, S., &amp; Walwema, J. (2017). From NoobGuides to #OpKKK: Ethics of Anonymous’ Tactical Technical Communication. Technical Communication Quarterly, 26(1), 59–75. https://doi.org/10.1080/10572252.2016.1257743</span>
<span id="cb61-61"><a href="#cb61-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-62"><a href="#cb61-62" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Edenfield, A. C. (2019). Queering consent: Design and sexual consent messaging. Communication Design Quarterly, 7(2), 50–63. https://doi.org/10.1145/3358931.3358938</span>
<span id="cb61-63"><a href="#cb61-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-64"><a href="#cb61-64" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Edenfield, A. C. (2021). Managing Gender Care in Precarity: Trans Communities Respond to COVID-19. Journal of Business and Technical Communication, 35(1), 15–21. https://doi.org/10.1177/1050651920958504</span>
<span id="cb61-65"><a href="#cb61-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-66"><a href="#cb61-66" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Edenfield, A. C., Holmes, S., &amp; Colton, J. S. (2019). Queering Tactical Technical Communication: DIY HRT. Technical Communication Quarterly, 28(3), 177–191. https://doi.org/10.1080/10572252.2019.1607906</span>
<span id="cb61-67"><a href="#cb61-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-68"><a href="#cb61-68" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Holladay, D. (2017). Classified Conversations: Psychiatry and Tactical Technical Communication in Online Spaces. Technical Communication Quarterly, 26(1), 8–24. https://doi.org/10.1080/10572252.2016.1257744</span>
<span id="cb61-69"><a href="#cb61-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-70"><a href="#cb61-70" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Kimball, M. A. (2006). Cars, Culture, and Tactical Technical Communication. Technical Communication Quarterly, 15(1), 67–86. https://doi.org/10.1207/s15427625tcq1501_6</span>
<span id="cb61-71"><a href="#cb61-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-72"><a href="#cb61-72" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Kimball, M. A. (2017). Tactical Technical Communication. Technical Communication Quarterly, 26(1), 1–7. https://doi.org/10.1080/10572252.2017.1259428</span>
<span id="cb61-73"><a href="#cb61-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-74"><a href="#cb61-74" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Peter, H. A. S.-S. (2017). “Make a Bomb in the Kitchen of Your Mom”: Jihadist Tactical Technical Communication and the Everyday Practice of Cooking. Technical Communication Quarterly, 26(1), 76–91. https://doi.org/10.1080/10572252.2016.1275862</span>
<span id="cb61-75"><a href="#cb61-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-76"><a href="#cb61-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-77"><a href="#cb61-77" aria-hidden="true" tabindex="-1"></a>These articles, starting with Kimball's "Cars, Culture, and Tactical Technical Communication," discuss the ways that users seek to navigate power systems and find dynamic ways to generate solutions. For instance, in the original Kimball article, the main focus is users who are interested in fixing their cars themselves. Today, however, in conjunction with the social justice turn, scholars have pointed out the ways that queer people use tactical technical communication, or even how users repond to psychiatric diagnoses. </span>
<span id="cb61-78"><a href="#cb61-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-79"><a href="#cb61-79" aria-hidden="true" tabindex="-1"></a>Arguably, we can see tactical technical communication happening in r/foodstamps, in which users practice "an art of the weak" as they navigate between cracks in strategic communication by the government or non-profits. While individual users may be assigned "flairs" or special tags in their profile that indicate when they comment about their role, such as "SNAP policy expert" or "<span class="co">[</span><span class="ot">SNAP eligibility expert - STATE</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/18jsejw/comment/kdmbanp/?utm_source=share&amp;utm_medium=web2x&amp;context=3)</span>", it is still the case that users are turning to the subreddit in order to navigate between the cracks of more formalized systems.</span>
<span id="cb61-80"><a href="#cb61-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-81"><a href="#cb61-81" aria-hidden="true" tabindex="-1"></a>An important question that remains, then, is how to characterize the nature of the TTC that is happening on r/foodstamps. Importantly, all of the previous approaches to understanding tactical technical communication have taken a much more qualitative approach, characterized by interviews and close reading. Therefore, as this Quarto website uses a computational approach, it offers a novel way to think about and analyze tactical technical communication. </span>
<span id="cb61-82"><a href="#cb61-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-83"><a href="#cb61-83" aria-hidden="true" tabindex="-1"></a><span class="fu"># Characterizing the data</span></span>
<span id="cb61-84"><a href="#cb61-84" aria-hidden="true" tabindex="-1"></a>There are many possible ways to potentially understand the posts on r/foodstamps, from qualitative to computational. Ultimately, given the size of the data that is possible (over 8000 posts), and the phenomena of interest, I chose to use computational techniques, including topic modeling, to understand the data. </span>
<span id="cb61-85"><a href="#cb61-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-86"><a href="#cb61-86" aria-hidden="true" tabindex="-1"></a>Moreover, because of the size of the data and because of the nature of SNAP, I chose to focus on the state of California. I did this for several reasons:</span>
<span id="cb61-87"><a href="#cb61-87" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>California is the largest state and has the greatest number of SNAP recipients</span>
<span id="cb61-88"><a href="#cb61-88" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>All of the states which had clearer and cleaner disbursement deadlines were very small states. For instance, the state of Connecticut only had 25 observations across nearly 8000 posts. Other small states were similar. Meanwhile, California distributes benefits from the 1st to the 10th, which is relatively clean and condensed. Additionally, because of the mechanism by which they choose when to distribute benefits to who (based on the last digit of the case number) it does not seem likely that there are other variables likely to affect when an individual would receive their benefit, and so cases would be evenly distributed over the 10 days of disbursement. </span>
<span id="cb61-89"><a href="#cb61-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-90"><a href="#cb61-90" aria-hidden="true" tabindex="-1"></a><span class="fu">## Research questions</span></span>
<span id="cb61-91"><a href="#cb61-91" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Does the composition of topics change over time for posts about California? </span>
<span id="cb61-92"><a href="#cb61-92" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How do they do so? </span>
<span id="cb61-93"><a href="#cb61-93" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Do the topics vary based on the day of the month and the number of days it has been since SNAP benefits were disbursed? </span>
<span id="cb61-94"><a href="#cb61-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-95"><a href="#cb61-95" aria-hidden="true" tabindex="-1"></a>The answers to these questions are important, because if it is true that the composition of topics varies based on the number of days it has been since SNAP benefits were disbursed, that could indicate that users were turning to the subreddit as they experience problems with their disbursement or eligibility. </span>
<span id="cb61-96"><a href="#cb61-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-97"><a href="#cb61-97" aria-hidden="true" tabindex="-1"></a>Consider for example one potential story of a poster, who expected to receive their EBT money on the 3rd of the month. It is now the 5th, so he posts on the subreddit asking a few questions hoping to receive an answer. On the other hand, consider another potential story about a poster who is asking about the backlog of cases. Often, caseworkers fall behind in their verification checks, sometimes up to <span class="co">[</span><span class="ot">120 days behind</span><span class="co">](https://www.reddit.com/r/foodstamps/comments/188g178/psa_for_texas_snap/)</span>. A user who was caught up in the backlog could post at any time of the month to seek out additional information about when their application was likely to be processed, and may not be more likely to post at a particular time of the month. </span>
<span id="cb61-98"><a href="#cb61-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-99"><a href="#cb61-99" aria-hidden="true" tabindex="-1"></a><span class="fu">### About topic modeling</span></span>
<span id="cb61-100"><a href="#cb61-100" aria-hidden="true" tabindex="-1"></a>Conveniently, topic modeling can pick up on the different types of words that people use, and sort them into probabilities. After looking at a lot of posts, a topic model can suggest that the two stories I laid out are likely to belong to different topics. Then, if the proportion of topics is very different on the 10th day of the month than, say, the 20th, that could indicate that when users experience specific problems, they turn to the subreddit. </span>
<span id="cb61-101"><a href="#cb61-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-102"><a href="#cb61-102" aria-hidden="true" tabindex="-1"></a>It is important to point out the limitations of this approach, as well. A topic model can do a good job of so-called "distant reading," but it does not do a good job of picking up ideas and concepts that a close reading approach done by a human is able to understand. </span>
<span id="cb61-103"><a href="#cb61-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-104"><a href="#cb61-104" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb61-105"><a href="#cb61-105" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Topic modeling is a method for unsupervised classification of such documents, similar to clustering on numeric data, which finds natural groups of items even when we’re not sure what we’re looking for</span><span class="co">](https://www.tidytextmining.com/topicmodeling.html)</span>.</span>
<span id="cb61-106"><a href="#cb61-106" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-107"><a href="#cb61-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-108"><a href="#cb61-108" aria-hidden="true" tabindex="-1"></a>What a topic model does is understand the words that are in a document, in our case, a post, using a <span class="co">[</span><span class="ot">"bag of words" approach</span><span class="co">](https://cbail.github.io/SICSS_Topic_Modeling.html)</span> that is more able to understand how words are "<span class="co">[</span><span class="ot">dependent on the broader context that they are used in natural language</span><span class="co">](https://cbail.github.io/SICSS_Topic_Modeling.html)</span>". Then, the topic model asks the human, "how many categories or topics do you think that there are?" After making this choice, the model then figures out which words are likely to appear within the same document. It's then likely that, for documents where there is some overlap in terms of the words that they use, are more likely to be similar than documents that don't use the same words. This is expressed as a "probability" that a particular document belongs in a particular category. </span>
<span id="cb61-109"><a href="#cb61-109" aria-hidden="true" tabindex="-1"></a>Taking the top probability for each document, we can then graph how the aggregation of these probabilities changes over time, based on how many days it has been since SNAP began to disburse. </span>
<span id="cb61-110"><a href="#cb61-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-111"><a href="#cb61-111" aria-hidden="true" tabindex="-1"></a>What this approach is *not* is it is not "the truth" or some other perfect representation of reality. It is a flawed computer program designed by a flawed human, so it should not be taken as an ideal representation of r/foodstamps. It would be perfectly possible to look at 8000 posts and do a qualitative analysis of these posts, sorting them, tagging them, and categorizing them by hand. This would be an equally reasonable and perhaps more interesting and more *valid* way of approaching this data. </span>
<span id="cb61-112"><a href="#cb61-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-113"><a href="#cb61-113" aria-hidden="true" tabindex="-1"></a>However, given the size of the data, it's much quicker to run a topic model than it is to develop a qualitative coding schema, so this is a reasonable first pass at this, and can allow for the generation of insights that can be developed further through interviews and more qualitative approaches. </span>
<span id="cb61-114"><a href="#cb61-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-115"><a href="#cb61-115" aria-hidden="true" tabindex="-1"></a><span class="fu"># About the data</span></span>
<span id="cb61-116"><a href="#cb61-116" aria-hidden="true" tabindex="-1"></a>The data in this case is post data and metadata from r/foodstamps. Initially and for the development of the code, I used the package in Rstudio called <span class="co">[</span><span class="ot">RedditExtractoR</span><span class="co">](https://github.com/ivan-rivera/RedditExtractor)</span>. This allowed for easy and convenient access to data when I was starting out. Unfortunately, given Reddit's API limits, this approach was limited to essentially the most recent 1000 posts. After running the package twice about a month apart, I was left with around 1300 posts, which left around 200 posts that mentioned the state of California. </span>
<span id="cb61-117"><a href="#cb61-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-118"><a href="#cb61-118" aria-hidden="true" tabindex="-1"></a>However, given the fact that I was interested in a longitudinal look at the data, I knew that I needed additional data. Therefore, after some Googling, <span class="co">[</span><span class="ot">I found this post on Reddit</span><span class="co">](https://www.reddit.com/r/pushshift/comments/11ef9if/separate_dump_files_for_the_top_20k_subreddits/)</span> which described how to get larger data sets online for the top 20k subreddits, of which r/foodstamps was fortunately one. After taking a quick tutorial in torrenting from my future sister-in-law, I downloaded Qtorrent, got a .zst file, and extracted it to find a very messed up JSON file. I used <span class="co">[</span><span class="ot">JSONlint.com</span><span class="co">](https://jsonlint.com/)</span> to try and figure out what was wrong, and I discovered that every single line of the data was missing a comma. So copied and pasted the data into Excel, added a column that contained a comma, and merged the two together, resulting in JSON data that was functionable and readable by R through the package jsonlite. </span>
<span id="cb61-119"><a href="#cb61-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-120"><a href="#cb61-120" aria-hidden="true" tabindex="-1"></a>What follows is annotation and description of the code that was used to produce the results. </span>
<span id="cb61-121"><a href="#cb61-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-122"><a href="#cb61-122" aria-hidden="true" tabindex="-1"></a>::: {.callout-warning}</span>
<span id="cb61-123"><a href="#cb61-123" aria-hidden="true" tabindex="-1"></a>Any problems with the code are my fault and my fault alone. Viewer discretion advised. I am certain that there were cleaner and more reproducible ways that I could have created this if I knew how. </span>
<span id="cb61-124"><a href="#cb61-124" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-125"><a href="#cb61-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-126"><a href="#cb61-126" aria-hidden="true" tabindex="-1"></a><span class="fu"># Importing data</span></span>
<span id="cb61-127"><a href="#cb61-127" aria-hidden="true" tabindex="-1"></a>Here, I am importing data from JSON into Rstudio. </span>
<span id="cb61-128"><a href="#cb61-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r importing_json_data}</span></span>
<span id="cb61-129"><a href="#cb61-129" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite) <span class="co"># handy package for loading and reading in JSON data</span></span>
<span id="cb61-130"><a href="#cb61-130" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># I just always install it </span></span>
<span id="cb61-131"><a href="#cb61-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-132"><a href="#cb61-132" aria-hidden="true" tabindex="-1"></a><span class="co"># importing JSON data</span></span>
<span id="cb61-133"><a href="#cb61-133" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">"~/Documents/GitHub/8520 Final Project/output/data/foodstamps_submissions.json"</span>)</span>
<span id="cb61-134"><a href="#cb61-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-135"><a href="#cb61-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-136"><a href="#cb61-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-137"><a href="#cb61-137" aria-hidden="true" tabindex="-1"></a><span class="fu"># Cleaning data (a lot of cleaning)</span></span>
<span id="cb61-138"><a href="#cb61-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-139"><a href="#cb61-139" aria-hidden="true" tabindex="-1"></a>In this case, a lot of the data (nearly all of the columns) is metadata of the posts. A lot of the posts simply don't have all the attributes, and aren't relevant to this study.</span>
<span id="cb61-140"><a href="#cb61-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-141"><a href="#cb61-141" aria-hidden="true" tabindex="-1"></a>For instance, a video post includes metadata about the video, but that's not the case for all of the posts. That explains why there are so many columns. However, some of the rows in columns that we are actually interested in don't have any data in them. Let's replace that data with NA so that we know what's up with those rows.</span>
<span id="cb61-142"><a href="#cb61-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-143"><a href="#cb61-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r tibble_&amp;_selecting_data_of_interest}</span></span>
<span id="cb61-144"><a href="#cb61-144" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(json_data)</span>
<span id="cb61-145"><a href="#cb61-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-146"><a href="#cb61-146" aria-hidden="true" tabindex="-1"></a><span class="co"># Cleaning data, fixing rows which do not have data</span></span>
<span id="cb61-147"><a href="#cb61-147" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>author <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>author, <span class="fu">is.na</span>(json_data<span class="sc">$</span>author), <span class="cn">NA</span>)</span>
<span id="cb61-148"><a href="#cb61-148" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>url <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>url, <span class="fu">is.na</span>(json_data<span class="sc">$</span>url), <span class="cn">NA</span>)</span>
<span id="cb61-149"><a href="#cb61-149" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>created <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>created, <span class="fu">is.na</span>(json_data<span class="sc">$</span>created), <span class="cn">NA</span>)</span>
<span id="cb61-150"><a href="#cb61-150" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>created_utc, <span class="fu">is.na</span>(json_data<span class="sc">$</span>created_utc), <span class="cn">NA</span>)</span>
<span id="cb61-151"><a href="#cb61-151" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>subreddit <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>subreddit, <span class="fu">is.na</span>(json_data<span class="sc">$</span>subreddit), <span class="cn">NA</span>)</span>
<span id="cb61-152"><a href="#cb61-152" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>title <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>title, <span class="fu">is.na</span>(json_data<span class="sc">$</span>title), <span class="cn">NA</span>)</span>
<span id="cb61-153"><a href="#cb61-153" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>permalink <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>permalink, <span class="fu">is.na</span>(json_data<span class="sc">$</span>permalink), <span class="cn">NA</span>)</span>
<span id="cb61-154"><a href="#cb61-154" aria-hidden="true" tabindex="-1"></a>json_data<span class="sc">$</span>selftext <span class="ot">&lt;-</span> <span class="fu">replace</span>(json_data<span class="sc">$</span>selftext, <span class="fu">is.na</span>(json_data<span class="sc">$</span>selftext), <span class="cn">NA</span>)</span>
<span id="cb61-155"><a href="#cb61-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-156"><a href="#cb61-156" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting columns I want to keep</span></span>
<span id="cb61-157"><a href="#cb61-157" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"author"</span>, <span class="st">"url"</span>, <span class="st">"created"</span>, <span class="st">"created_utc"</span>, <span class="st">"subreddit"</span>, <span class="st">"title"</span>, <span class="st">"permalink"</span>, <span class="st">"selftext"</span>)</span>
<span id="cb61-158"><a href="#cb61-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-159"><a href="#cb61-159" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new data frame</span></span>
<span id="cb61-160"><a href="#cb61-160" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span> json_data <span class="sc">%&gt;%</span></span>
<span id="cb61-161"><a href="#cb61-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(selected_columns))</span>
<span id="cb61-162"><a href="#cb61-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-163"><a href="#cb61-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-164"><a href="#cb61-164" aria-hidden="true" tabindex="-1"></a>The dates were UNIX dates (the number of seconds since 1/1/1970), so I fought with Rstudio for probably an hour</span>
<span id="cb61-165"><a href="#cb61-165" aria-hidden="true" tabindex="-1"></a>to get them into a human intelligible form:</span>
<span id="cb61-166"><a href="#cb61-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-167"><a href="#cb61-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r fixing_dates}</span></span>
<span id="cb61-168"><a href="#cb61-168" aria-hidden="true" tabindex="-1"></a><span class="co"># creating POSIX vector</span></span>
<span id="cb61-169"><a href="#cb61-169" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="fu">as.numeric</span>(cleaned_data<span class="sc">$</span>created), <span class="at">origin =</span> <span class="st">"1970-01-01"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb61-170"><a href="#cb61-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-171"><a href="#cb61-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting from UNIX to real dates</span></span>
<span id="cb61-172"><a href="#cb61-172" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># lubridate offers tidy ways of handling and dealing with dates</span></span>
<span id="cb61-173"><a href="#cb61-173" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(cleaned_data<span class="sc">$</span>created_utc)</span>
<span id="cb61-174"><a href="#cb61-174" aria-hidden="true" tabindex="-1"></a>cleaned_data<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as_datetime</span>(cleaned_data<span class="sc">$</span>created_utc)</span>
<span id="cb61-175"><a href="#cb61-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-176"><a href="#cb61-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-177"><a href="#cb61-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-178"><a href="#cb61-178" aria-hidden="true" tabindex="-1"></a><span class="fu"># Subsetting California data</span></span>
<span id="cb61-179"><a href="#cb61-179" aria-hidden="true" tabindex="-1"></a>Before we do some topic modeling, we want to extract out only the data that references the state of California. California is the biggest state, has the greatest number of people on SNAP, and has by far the greatest number of posts referencing it. In order to understand the dynamics of the program, we have to understand the administration which happens at the state level. Because of this, I have chosen to take a state-by-state approach to this. This website focuses on California, but this work could be extended to other states in the future. </span>
<span id="cb61-180"><a href="#cb61-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-181"><a href="#cb61-181" aria-hidden="true" tabindex="-1"></a>We will also do some additional cleaning. For instance, combining the title and text columns together to create a single column, "title_and_text." I did this because the title may contain important information about the post, including the state data, as well as information that may help us to understand the topics within that post. (<span class="co">[</span><span class="ot">Julia Silge does this as well in this post</span><span class="co">](https://juliasilge.com/blog/evaluating-stm/)</span>)</span>
<span id="cb61-182"><a href="#cb61-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-183"><a href="#cb61-183" aria-hidden="true" tabindex="-1"></a>Then, I split the date-UTC column of the data into year, month, and day, each in separate columns. I did this so that we can focus on which day of the month the post was on. Again, if there are patterns in the topics based on the day of the month, that might indicate that users are turning to the subreddit in lieu of reaching out to the government for assistance. </span>
<span id="cb61-184"><a href="#cb61-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-185"><a href="#cb61-185" aria-hidden="true" tabindex="-1"></a>Then, I searched the data for references to California. I used a wide variety of search terms in order to capture as many posts as possible that are posted about the California SNAP program, including slang, and the official name of the program, <span class="co">[</span><span class="ot">CalFresh</span><span class="co">](https://www.cdss.ca.gov/calfresh)</span>. Then, we can de-duplicate because it seems likely that some posts may mention both "CalFresh" and "California," for instance. </span>
<span id="cb61-186"><a href="#cb61-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-187"><a href="#cb61-187" aria-hidden="true" tabindex="-1"></a>Mentioning this here again: California disburses SNAP money on the 1st through the 10th of the month, depending on the last digit of the citizen's assigned case number. So if the last digit is 5, their benefits will be delivered on the 5th of the month. </span>
<span id="cb61-188"><a href="#cb61-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-189"><a href="#cb61-189" aria-hidden="true" tabindex="-1"></a><span class="in">```{r subset_&amp;_additional_cleaning}</span></span>
<span id="cb61-190"><a href="#cb61-190" aria-hidden="true" tabindex="-1"></a><span class="co"># sub-setting California json data, then running a topic model on that data</span></span>
<span id="cb61-191"><a href="#cb61-191" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb61-192"><a href="#cb61-192" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb61-193"><a href="#cb61-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-194"><a href="#cb61-194" aria-hidden="true" tabindex="-1"></a><span class="co"># combining the title and text columns</span></span>
<span id="cb61-195"><a href="#cb61-195" aria-hidden="true" tabindex="-1"></a>raw_data_combined <span class="ot">&lt;-</span> <span class="fu">unite</span>(cleaned_data, title_and_text, title, selftext, <span class="at">sep =</span> <span class="st">" "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span>
<span id="cb61-196"><a href="#cb61-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-197"><a href="#cb61-197" aria-hidden="true" tabindex="-1"></a><span class="co"># separating the date utc column into month day year</span></span>
<span id="cb61-198"><a href="#cb61-198" aria-hidden="true" tabindex="-1"></a>raw_data_combined <span class="ot">&lt;-</span> <span class="fu">separate</span>(raw_data_combined,</span>
<span id="cb61-199"><a href="#cb61-199" aria-hidden="true" tabindex="-1"></a>                              <span class="at">col =</span> created_utc,</span>
<span id="cb61-200"><a href="#cb61-200" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>))</span>
<span id="cb61-201"><a href="#cb61-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-202"><a href="#cb61-202" aria-hidden="true" tabindex="-1"></a><span class="co"># changing year, month, and day variable from characters into integers</span></span>
<span id="cb61-203"><a href="#cb61-203" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>year)</span>
<span id="cb61-204"><a href="#cb61-204" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>month)</span>
<span id="cb61-205"><a href="#cb61-205" aria-hidden="true" tabindex="-1"></a>raw_data_combined<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(raw_data_combined<span class="sc">$</span>day)</span>
<span id="cb61-206"><a href="#cb61-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-207"><a href="#cb61-207" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb61-208"><a href="#cb61-208" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb61-209"><a href="#cb61-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-210"><a href="#cb61-210" aria-hidden="true" tabindex="-1"></a><span class="co"># Searching the data for references to California</span></span>
<span id="cb61-211"><a href="#cb61-211" aria-hidden="true" tabindex="-1"></a>California_raw_1 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-212"><a href="#cb61-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Calfresh"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-213"><a href="#cb61-213" aria-hidden="true" tabindex="-1"></a>california_raw_2 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-214"><a href="#cb61-214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">" Cal "</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-215"><a href="#cb61-215" aria-hidden="true" tabindex="-1"></a>California_raw_3 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-216"><a href="#cb61-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"California"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-217"><a href="#cb61-217" aria-hidden="true" tabindex="-1"></a>California_raw_4 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-218"><a href="#cb61-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Cali"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-219"><a href="#cb61-219" aria-hidden="true" tabindex="-1"></a>California_raw_5 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-220"><a href="#cb61-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Los Angeles"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-221"><a href="#cb61-221" aria-hidden="true" tabindex="-1"></a>California_raw_6 <span class="ot">&lt;-</span> raw_data_combined <span class="sc">%&gt;%</span> </span>
<span id="cb61-222"><a href="#cb61-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"LA County"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-223"><a href="#cb61-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-224"><a href="#cb61-224" aria-hidden="true" tabindex="-1"></a><span class="co"># binding searches together into a single data set</span></span>
<span id="cb61-225"><a href="#cb61-225" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(California_raw_1, </span>
<span id="cb61-226"><a href="#cb61-226" aria-hidden="true" tabindex="-1"></a>                                   california_raw_2, </span>
<span id="cb61-227"><a href="#cb61-227" aria-hidden="true" tabindex="-1"></a>                                   California_raw_3, </span>
<span id="cb61-228"><a href="#cb61-228" aria-hidden="true" tabindex="-1"></a>                                   California_raw_4, </span>
<span id="cb61-229"><a href="#cb61-229" aria-hidden="true" tabindex="-1"></a>                                   California_raw_5, </span>
<span id="cb61-230"><a href="#cb61-230" aria-hidden="true" tabindex="-1"></a>                                   California_raw_6)</span>
<span id="cb61-231"><a href="#cb61-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-232"><a href="#cb61-232" aria-hidden="true" tabindex="-1"></a><span class="co"># removing posts that have been deleted from the dataset</span></span>
<span id="cb61-233"><a href="#cb61-233" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span></span>
<span id="cb61-234"><a href="#cb61-234" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"deleted"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-235"><a href="#cb61-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-236"><a href="#cb61-236" aria-hidden="true" tabindex="-1"></a><span class="co"># For some freaking reason (it works in my other code) data is getting deleted when I do this. After trouble shooting for multiple hours I have given up on this and am bringing in data from my other project to fix the problem. </span></span>
<span id="cb61-237"><a href="#cb61-237" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/Documents/GitHub/8520 Final Project/output/data/California_raw_master"</span>)</span>
<span id="cb61-238"><a href="#cb61-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-239"><a href="#cb61-239" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's make sure that we don't have any duplicates</span></span>
<span id="cb61-240"><a href="#cb61-240" aria-hidden="true" tabindex="-1"></a>California_raw_master <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span> </span>
<span id="cb61-241"><a href="#cb61-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(title_and_text, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-242"><a href="#cb61-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-243"><a href="#cb61-243" aria-hidden="true" tabindex="-1"></a>This results in just over 1000 posts, and 11 variables. </span>
<span id="cb61-244"><a href="#cb61-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-245"><a href="#cb61-245" aria-hidden="true" tabindex="-1"></a><span class="fu"># Weird data sidebar</span></span>
<span id="cb61-246"><a href="#cb61-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-247"><a href="#cb61-247" aria-hidden="true" tabindex="-1"></a>Because of the format of the data, there were a lot of tokens that were using really really funky characters, like ǒ or ä. After exploring, I realized that these are some kind of artifact from apostrophes in the data. Let's remove them after investigating, as they do not contain useful information for our topic model. </span>
<span id="cb61-248"><a href="#cb61-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-249"><a href="#cb61-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r weird_data}</span></span>
<span id="cb61-250"><a href="#cb61-250" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploring weird data</span></span>
<span id="cb61-251"><a href="#cb61-251" aria-hidden="true" tabindex="-1"></a>weird <span class="ot">&lt;-</span> California_raw_master <span class="sc">%&gt;%</span> </span>
<span id="cb61-252"><a href="#cb61-252" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"äôt"</span>, title_and_text, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb61-253"><a href="#cb61-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-254"><a href="#cb61-254" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(weird)</span>
<span id="cb61-255"><a href="#cb61-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-256"><a href="#cb61-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-257"><a href="#cb61-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-258"><a href="#cb61-258" aria-hidden="true" tabindex="-1"></a><span class="fu"># Making some tokens, doing some pruning of docs</span></span>
<span id="cb61-259"><a href="#cb61-259" aria-hidden="true" tabindex="-1"></a>Now we will begin the tokenization process. We are removing punctuation, numbers, and URLs from the title_and_text variable in the data. We'll also lower all of the text, and remove all stop words. While these words may have important rhetorical meaning, they are less relevant in this context, because what we are trying to do is see how topics may change over time. </span>
<span id="cb61-260"><a href="#cb61-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-261"><a href="#cb61-261" aria-hidden="true" tabindex="-1"></a>We'll also remove some of the weird words that were appearing, like äǒs, but we'll also remove words corresponding to California. I did this because these are words that are not communicating new information to us about the data.</span>
<span id="cb61-262"><a href="#cb61-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-263"><a href="#cb61-263" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb61-264"><a href="#cb61-264" aria-hidden="true" tabindex="-1"></a>This section <span class="co">[</span><span class="ot">mostly follows this tutorial</span><span class="co">](https://burtmonroe.github.io/TextAsDataCourse/Tutorials/IntroSTM.nb.html)</span>, but it's really a blend of many, many different tutorials. Many thanks to the people who put these together, I found them all very helpful!</span>
<span id="cb61-265"><a href="#cb61-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-266"><a href="#cb61-266" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://juliasilge.com/blog/evaluating-stm/</span>
<span id="cb61-267"><a href="#cb61-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-268"><a href="#cb61-268" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://bookdown.enpchina.eu/PublicSphere_stm/PublicSphere_English.html#Topics_over_time</span>
<span id="cb61-269"><a href="#cb61-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-270"><a href="#cb61-270" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://ds4cs.netlify.app/learning/text-as-data/the-power-of-text-as-data-topic-modeling-on-the-mostly-collected-works-of-marx-and-engels/</span>
<span id="cb61-271"><a href="#cb61-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-272"><a href="#cb61-272" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://jayrobwilliams.com/files/html/teaching-materials/STM.html</span>
<span id="cb61-273"><a href="#cb61-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-274"><a href="#cb61-274" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>https://cbail.github.io/SICSS_Topic_Modeling.html</span>
<span id="cb61-275"><a href="#cb61-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-276"><a href="#cb61-276" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-277"><a href="#cb61-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-280"><a href="#cb61-280" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-281"><a href="#cb61-281" aria-hidden="true" tabindex="-1"></a><span class="co">#tokenization &amp; removing punctuation/numbers/URLs etc.</span></span>
<span id="cb61-282"><a href="#cb61-282" aria-hidden="true" tabindex="-1"></a>tokens <span class="ot">&lt;-</span> California_raw_master<span class="sc">$</span>title_and_text <span class="sc">%&gt;%</span></span>
<span id="cb61-283"><a href="#cb61-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens</span>(<span class="at">what =</span> <span class="st">"word"</span>,</span>
<span id="cb61-284"><a href="#cb61-284" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_punct =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-285"><a href="#cb61-285" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>,</span>
<span id="cb61-286"><a href="#cb61-286" aria-hidden="true" tabindex="-1"></a>         <span class="at">remove_url =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-287"><a href="#cb61-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">"english"</span>))</span>
<span id="cb61-288"><a href="#cb61-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-289"><a href="#cb61-289" aria-hidden="true" tabindex="-1"></a><span class="co">#applying relative pruning</span></span>
<span id="cb61-290"><a href="#cb61-290" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(<span class="fu">dfm</span>(tokens), <span class="at">min_docfreq =</span> <span class="fl">0.005</span>, <span class="at">max_docfreq =</span> <span class="fl">0.99</span>, </span>
<span id="cb61-291"><a href="#cb61-291" aria-hidden="true" tabindex="-1"></a>                <span class="at">docfreq_type =</span> <span class="st">"prop"</span>, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-292"><a href="#cb61-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-293"><a href="#cb61-293" aria-hidden="true" tabindex="-1"></a><span class="co"># removing some weird words</span></span>
<span id="cb61-294"><a href="#cb61-294" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> <span class="fu">dfm_remove</span>(dfm, <span class="fu">c</span>(<span class="st">"amp"</span>, <span class="st">"$"</span>, <span class="st">"so"</span>, <span class="st">"t"</span>, <span class="st">"m"</span>, </span>
<span id="cb61-295"><a href="#cb61-295" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"s"</span>, <span class="st">"cal"</span>,<span class="st">"calfresh"</span>,<span class="st">"california"</span>,<span class="st">"aot"</span>,</span>
<span id="cb61-296"><a href="#cb61-296" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"äôt"</span>,<span class="st">"äôm"</span>,<span class="st">"äôs"</span>,<span class="st">"los"</span>,<span class="st">"county"</span>,</span>
<span id="cb61-297"><a href="#cb61-297" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"#x200b"</span>, <span class="st">"="</span>, <span class="st">"sar7"</span>, <span class="st">"aos"</span>, <span class="st">"sar-7"</span>, <span class="st">"äô"</span>))</span>
<span id="cb61-298"><a href="#cb61-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-299"><a href="#cb61-299" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting from DFM to STM</span></span>
<span id="cb61-300"><a href="#cb61-300" aria-hidden="true" tabindex="-1"></a>dfm_stm <span class="ot">&lt;-</span> <span class="fu">convert</span>(dfm, <span class="at">to =</span> <span class="st">"stm"</span>)</span>
<span id="cb61-301"><a href="#cb61-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-302"><a href="#cb61-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-303"><a href="#cb61-303" aria-hidden="true" tabindex="-1"></a><span class="fu"># Topic modeling on that sweet, sweet California data.</span></span>
<span id="cb61-304"><a href="#cb61-304" aria-hidden="true" tabindex="-1"></a>Now that we have created some data that is ready to be fed into a structural topic model, we can begin to search for "K" or the number of topics that we want to sort documents into. This is a very important part of topic modeling, so we will run the model many times, varying the number of categories that the computer uses. Then, we will graph some key attributes of each number of categories, and make a qualitative decision about what is best. Some terms to understand:</span>
<span id="cb61-305"><a href="#cb61-305" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Semantic coherence</span>
<span id="cb61-306"><a href="#cb61-306" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Exclusivity </span>
<span id="cb61-307"><a href="#cb61-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-308"><a href="#cb61-308" aria-hidden="true" tabindex="-1"></a>Semantic coherence "<span class="co">[</span><span class="ot">is maximized when the most probable words in a given topic frequently co-occur together</span><span class="co">](https://juliasilge.com/blog/evaluating-stm/)</span>, and it basically tries to proxy for human judgement of the quality of topics. On the other hand, too much semantic coherence can mean that there are too few topics, and every topic is just a lot of really common words (<span class="co">[</span><span class="ot">read the original paper here</span><span class="co">](https://dl.acm.org/doi/10.5555/2145432.2145462)</span>). </span>
<span id="cb61-309"><a href="#cb61-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-310"><a href="#cb61-310" aria-hidden="true" tabindex="-1"></a>Exclusivity is the balance to coherence. It is a measure of how exclusive a topic is--so for the words that make up the topic, do they also rank highly in other topics? That could be an indication that the topics are not very *exclusive* and so additional topics would be beneficial for the analysis. On the other hand, too many topics will degrade the semantic coherence. Again it is a balance between the two, and there is not a single, correct choice. </span>
<span id="cb61-311"><a href="#cb61-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-312"><a href="#cb61-312" aria-hidden="true" tabindex="-1"></a><span class="fu">## Finding K</span></span>
<span id="cb61-313"><a href="#cb61-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-314"><a href="#cb61-314" aria-hidden="true" tabindex="-1"></a><span class="in">```{r finding_K, results=FALSE}</span></span>
<span id="cb61-315"><a href="#cb61-315" aria-hidden="true" tabindex="-1"></a><span class="co"># topic topic modeling </span></span>
<span id="cb61-316"><a href="#cb61-316" aria-hidden="true" tabindex="-1"></a><span class="do">## searching for K</span></span>
<span id="cb61-317"><a href="#cb61-317" aria-hidden="true" tabindex="-1"></a>K <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>) <span class="co"># this is what allows us to vary the # of topics.</span></span>
<span id="cb61-318"><a href="#cb61-318" aria-hidden="true" tabindex="-1"></a><span class="co"># Running the search (computationally intense, takes a long time)</span></span>
<span id="cb61-319"><a href="#cb61-319" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">searchK</span>(dfm_stm<span class="sc">$</span>documents, dfm_stm<span class="sc">$</span>vocab, <span class="at">K =</span> K, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-320"><a href="#cb61-320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-321"><a href="#cb61-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-322"><a href="#cb61-322" aria-hidden="true" tabindex="-1"></a><span class="fu">### Making some plots that will help us find an interesting K</span></span>
<span id="cb61-323"><a href="#cb61-323" aria-hidden="true" tabindex="-1"></a>Well, that took a long time, and I've hidden the output of the code from the Quarto website because it's just too long. If we do some plots and graphs, that will help us visualize the output from K. </span>
<span id="cb61-324"><a href="#cb61-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-325"><a href="#cb61-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r K_graphs}</span></span>
<span id="cb61-326"><a href="#cb61-326" aria-hidden="true" tabindex="-1"></a><span class="co"># Create graph</span></span>
<span id="cb61-327"><a href="#cb61-327" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"K"</span> <span class="ot">=</span> K, </span>
<span id="cb61-328"><a href="#cb61-328" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Coherence"</span> <span class="ot">=</span> <span class="fu">unlist</span>(fit<span class="sc">$</span>results<span class="sc">$</span>semcoh),</span>
<span id="cb61-329"><a href="#cb61-329" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Exclusivity"</span> <span class="ot">=</span> <span class="fu">unlist</span>(fit<span class="sc">$</span>results<span class="sc">$</span>exclus))</span>
<span id="cb61-330"><a href="#cb61-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-331"><a href="#cb61-331" aria-hidden="true" tabindex="-1"></a>big_plot <span class="ot">&lt;-</span> plot <span class="co"># Saving this plot for later</span></span>
<span id="cb61-332"><a href="#cb61-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-333"><a href="#cb61-333" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape to long format</span></span>
<span id="cb61-334"><a href="#cb61-334" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"reshape2"</span>)</span>
<span id="cb61-335"><a href="#cb61-335" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">melt</span>(plot, <span class="at">id=</span><span class="fu">c</span>(<span class="st">"K"</span>))</span>
<span id="cb61-336"><a href="#cb61-336" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot result</span></span>
<span id="cb61-337"><a href="#cb61-337" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb61-338"><a href="#cb61-338" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot, <span class="fu">aes</span>(K, value, <span class="at">color =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-339"><a href="#cb61-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb61-340"><a href="#cb61-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>variable,<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb61-341"><a href="#cb61-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of topics K"</span>,</span>
<span id="cb61-342"><a href="#cb61-342" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Statistical fit of models with different K"</span>)</span>
<span id="cb61-343"><a href="#cb61-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-344"><a href="#cb61-344" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-345"><a href="#cb61-345" aria-hidden="true" tabindex="-1"></a><span class="fu">## Picking a K number</span></span>
<span id="cb61-346"><a href="#cb61-346" aria-hidden="true" tabindex="-1"></a>Based on what we can see here, it seems like a good K number could be around 15. That would be a nice balance between coherence and exclusivity, two measures of a good K. </span>
<span id="cb61-347"><a href="#cb61-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-348"><a href="#cb61-348" aria-hidden="true" tabindex="-1"></a><span class="fu"># Running the topic model</span></span>
<span id="cb61-349"><a href="#cb61-349" aria-hidden="true" tabindex="-1"></a>Let's run the topic model with 15 topics. Additionally, one of the benefits of using structural topic modeling (stm package) is that we can specify a covariate that we're interested in. We'll choose the day variable, since that's what will allow us to look at the day of the month and how that affects the topics (<span class="co">[</span><span class="ot">I learned how to do this from this tutorial</span><span class="co">](https://jayrobwilliams.com/files/html/teaching-materials/STM.html)</span>). </span>
<span id="cb61-350"><a href="#cb61-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-351"><a href="#cb61-351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r running_the_topic_model, results=FALSE}</span></span>
<span id="cb61-352"><a href="#cb61-352" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb61-353"><a href="#cb61-353" aria-hidden="true" tabindex="-1"></a>model_1 <span class="ot">&lt;-</span> <span class="fu">stm</span>(<span class="at">documents =</span> dfm_stm<span class="sc">$</span>documents,  <span class="at">vocab =</span> dfm_stm<span class="sc">$</span>vocab, <span class="at">K =</span> <span class="dv">15</span>, <span class="at">prevalence =</span> <span class="sc">~</span>California_raw_master<span class="sc">$</span>day, <span class="at">data =</span> California_raw_master, <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-354"><a href="#cb61-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-355"><a href="#cb61-355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-356"><a href="#cb61-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-357"><a href="#cb61-357" aria-hidden="true" tabindex="-1"></a><span class="fu">## Plotting the topic model</span></span>
<span id="cb61-358"><a href="#cb61-358" aria-hidden="true" tabindex="-1"></a>This basic plot brings up the top words that are a part of each topic. It's not very cool or interesting looking, although it has a lot of information contained within it. Ultimately, it's not what we are interested in but it's still important to understand. </span>
<span id="cb61-359"><a href="#cb61-359" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plotting_the_topic_model}</span></span>
<span id="cb61-360"><a href="#cb61-360" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_1)</span>
<span id="cb61-361"><a href="#cb61-361" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-362"><a href="#cb61-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-363"><a href="#cb61-363" aria-hidden="true" tabindex="-1"></a><span class="fu"># Estimate effect</span></span>
<span id="cb61-364"><a href="#cb61-364" aria-hidden="true" tabindex="-1"></a>Estimate effect is a handy function that's a part of STM that allows us to estimate the effect of a variable on the topics (<span class="co">[</span><span class="ot">link</span><span class="co">](https://rdrr.io/cran/stm/man/estimateEffect.html)</span>). It's important that the topic model that you ran earlier runs the same variable.</span>
<span id="cb61-365"><a href="#cb61-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-366"><a href="#cb61-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r estimate_effect}</span></span>
<span id="cb61-367"><a href="#cb61-367" aria-hidden="true" tabindex="-1"></a>effect <span class="ot">&lt;-</span> <span class="fu">estimateEffect</span>(<span class="at">formula=</span><span class="sc">~</span>day, <span class="at">stmobj=</span>model_1, <span class="at">metadata=</span>California_raw_master)</span>
<span id="cb61-368"><a href="#cb61-368" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-369"><a href="#cb61-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-370"><a href="#cb61-370" aria-hidden="true" tabindex="-1"></a><span class="fu">## Outputting some basic charts</span></span>
<span id="cb61-371"><a href="#cb61-371" aria-hidden="true" tabindex="-1"></a>Now we will try and split out some basic charts. They won't look good, and they won't get the job done. But they will be charts, and they will exist. </span>
<span id="cb61-372"><a href="#cb61-372" aria-hidden="true" tabindex="-1"></a><span class="in">```{r outputting_some_basic_charts}</span></span>
<span id="cb61-373"><a href="#cb61-373" aria-hidden="true" tabindex="-1"></a><span class="co"># not beautiful plots of day of the month and topic</span></span>
<span id="cb61-374"><a href="#cb61-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-375"><a href="#cb61-375" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(effect, <span class="st">"day"</span>, <span class="at">method =</span> <span class="st">"continuous"</span>, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">model =</span> model_1)</span>
<span id="cb61-376"><a href="#cb61-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-377"><a href="#cb61-377" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the X-axis with the specified order</span></span>
<span id="cb61-378"><a href="#cb61-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-379"><a href="#cb61-379" aria-hidden="true" tabindex="-1"></a>Let's add some stuff like labels to this. </span>
<span id="cb61-382"><a href="#cb61-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-383"><a href="#cb61-383" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) </span>
<span id="cb61-384"><a href="#cb61-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-385"><a href="#cb61-385" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(effect, <span class="st">"day"</span>, <span class="at">method =</span> <span class="st">"continuous"</span>, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>), <span class="at">model =</span></span>
<span id="cb61-386"><a href="#cb61-386" aria-hidden="true" tabindex="-1"></a>model_1, <span class="at">xlab =</span> <span class="st">"Day of the month"</span>, <span class="at">ylab =</span> <span class="st">"Expected topic proportion"</span>,</span>
<span id="cb61-387"><a href="#cb61-387" aria-hidden="true" tabindex="-1"></a><span class="at">printlegend =</span> F)</span>
<span id="cb61-388"><a href="#cb61-388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-389"><a href="#cb61-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-390"><a href="#cb61-390" aria-hidden="true" tabindex="-1"></a><span class="fu">## Saving top features</span></span>
<span id="cb61-391"><a href="#cb61-391" aria-hidden="true" tabindex="-1"></a>In case we later want to return and do some qualitative analysis and thinking about the words, lets save the outputs of our model in a .csv file. We'll focus on FREX words, since those are typically considered to be a nice balance between exclusivity and coherence within a topic. </span>
<span id="cb61-394"><a href="#cb61-394" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-395"><a href="#cb61-395" aria-hidden="true" tabindex="-1"></a><span class="co">#Save top 20 features across topics and forms of weighting </span></span>
<span id="cb61-396"><a href="#cb61-396" aria-hidden="true" tabindex="-1"></a>labels_1 <span class="ot">&lt;-</span> <span class="fu">labelTopics</span>(model_1, <span class="at">n=</span><span class="dv">15</span>) </span>
<span id="cb61-397"><a href="#cb61-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-398"><a href="#cb61-398" aria-hidden="true" tabindex="-1"></a><span class="co">#only keep FREX weighting </span></span>
<span id="cb61-399"><a href="#cb61-399" aria-hidden="true" tabindex="-1"></a>topwords_1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"features"</span> <span class="ot">=</span><span class="fu">t</span>(labels_1<span class="sc">$</span>frex)) </span>
<span id="cb61-400"><a href="#cb61-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-401"><a href="#cb61-401" aria-hidden="true" tabindex="-1"></a><span class="co">#assign topic number as column name </span></span>
<span id="cb61-402"><a href="#cb61-402" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(topwords_1) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Topics"</span>, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)) </span>
<span id="cb61-403"><a href="#cb61-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-404"><a href="#cb61-404" aria-hidden="true" tabindex="-1"></a><span class="co">#Return the result </span></span>
<span id="cb61-405"><a href="#cb61-405" aria-hidden="true" tabindex="-1"></a>topwords_1[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>] </span>
<span id="cb61-406"><a href="#cb61-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-407"><a href="#cb61-407" aria-hidden="true" tabindex="-1"></a>thoughts_topics_15 <span class="ot">&lt;-</span> <span class="fu">findThoughts</span>(<span class="at">model =</span> model_1,  California_raw_master<span class="sc">$</span>title_and_text,<span class="at">n=</span><span class="dv">1</span>, <span class="at">topics =</span> <span class="dv">1</span>)</span>
<span id="cb61-408"><a href="#cb61-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-409"><a href="#cb61-409" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's write a CSV so we can return to these top words later and do some qualitative analysis</span></span>
<span id="cb61-410"><a href="#cb61-410" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(topwords_1, <span class="st">"topwords_15_topics"</span>)</span>
<span id="cb61-411"><a href="#cb61-411" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-412"><a href="#cb61-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-413"><a href="#cb61-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-414"><a href="#cb61-414" aria-hidden="true" tabindex="-1"></a><span class="fu"># Making charts that are helpful</span></span>
<span id="cb61-415"><a href="#cb61-415" aria-hidden="true" tabindex="-1"></a>Let's make some charts that will allow us to visualize things better. This first chart is pretty, but not that helpful. </span>
<span id="cb61-416"><a href="#cb61-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-417"><a href="#cb61-417" aria-hidden="true" tabindex="-1"></a><span class="fu">## Bar chart</span></span>
<span id="cb61-418"><a href="#cb61-418" aria-hidden="true" tabindex="-1"></a><span class="in">```{r really_good_charts}</span></span>
<span id="cb61-419"><a href="#cb61-419" aria-hidden="true" tabindex="-1"></a><span class="co"># following this tutorial https://bookdown.enpchina.eu/PublicSphere_stm/PublicSphere_English.html#Topics_over_time</span></span>
<span id="cb61-420"><a href="#cb61-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-421"><a href="#cb61-421" aria-hidden="true" tabindex="-1"></a>day_20 <span class="ot">&lt;-</span> stm<span class="sc">::</span><span class="fu">estimateEffect</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span> <span class="sc">~</span> day, model_1, <span class="at">meta=</span>California_raw_master)</span>
<span id="cb61-422"><a href="#cb61-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-423"><a href="#cb61-423" aria-hidden="true" tabindex="-1"></a>topicprop20<span class="ot">&lt;-</span><span class="fu">make.dt</span>(model_1, meta)</span>
<span id="cb61-424"><a href="#cb61-424" aria-hidden="true" tabindex="-1"></a>topic20prop <span class="ot">&lt;-</span> topicprop20 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">16</span>))</span>
<span id="cb61-425"><a href="#cb61-425" aria-hidden="true" tabindex="-1"></a>topic_proportion_per_year20 <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(topic20prop, <span class="at">by =</span> <span class="fu">list</span>(<span class="at">day =</span> California_raw_master<span class="sc">$</span>day), mean)</span>
<span id="cb61-426"><a href="#cb61-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-427"><a href="#cb61-427" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape)</span>
<span id="cb61-428"><a href="#cb61-428" aria-hidden="true" tabindex="-1"></a>vizDataFrame20y <span class="ot">&lt;-</span> <span class="fu">melt</span>(topic_proportion_per_year20, <span class="at">id.vars =</span> <span class="st">"day"</span>)</span>
<span id="cb61-429"><a href="#cb61-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-430"><a href="#cb61-430" aria-hidden="true" tabindex="-1"></a>heat_palette <span class="ot">&lt;-</span> <span class="fu">heat.colors</span>(<span class="dv">20</span>)</span>
<span id="cb61-431"><a href="#cb61-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-432"><a href="#cb61-432" aria-hidden="true" tabindex="-1"></a>palette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#2f4f4f"</span>, <span class="st">"#2e8b57"</span>,</span>
<span id="cb61-433"><a href="#cb61-433" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#800000"</span>, <span class="st">"#808000"</span>,<span class="st">"#000080"</span>,</span>
<span id="cb61-434"><a href="#cb61-434" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#ff0000"</span>,<span class="st">"#ff8c00"</span>,<span class="st">"#ffd700"</span>,<span class="st">"#00ff00"</span>,<span class="st">"#4169e1"</span>,<span class="st">"#00ffff"</span>,</span>
<span id="cb61-435"><a href="#cb61-435" aria-hidden="true" tabindex="-1"></a>             <span class="st">"#00bfff"</span>,<span class="st">"#0000ff"</span>,<span class="st">"#da70d6"</span>,<span class="st">"#d8bfd8"</span>) <span class="co"># Colors picked using a color palette generator</span></span>
<span id="cb61-436"><a href="#cb61-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-437"><a href="#cb61-437" aria-hidden="true" tabindex="-1"></a>moneyshot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(vizDataFrame20y, <span class="fu">aes</span>(<span class="at">x=</span>day, <span class="at">y=</span>value, <span class="at">fill =</span> variable)) <span class="sc">+</span> </span>
<span id="cb61-438"><a href="#cb61-438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"proportion"</span>) <span class="sc">+</span> </span>
<span id="cb61-439"><a href="#cb61-439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> palette, <span class="at">name =</span> <span class="st">"Topic"</span>) <span class="sc">+</span> </span>
<span id="cb61-440"><a href="#cb61-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb61-441"><a href="#cb61-441" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"topics over the month in r/foodstamps"</span>, </span>
<span id="cb61-442"><a href="#cb61-442" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Topic proportion over time (posts that mention California)"</span>) <span class="sc">+</span></span>
<span id="cb61-443"><a href="#cb61-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">31</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">31</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span>))</span>
<span id="cb61-444"><a href="#cb61-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-445"><a href="#cb61-445" aria-hidden="true" tabindex="-1"></a>moneyshot</span>
<span id="cb61-446"><a href="#cb61-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-447"><a href="#cb61-447" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"moneyshot_15_topics.png"</span>, moneyshot, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">300</span>) <span class="co"># let's make sure to save the chart.</span></span>
<span id="cb61-448"><a href="#cb61-448" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-449"><a href="#cb61-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-450"><a href="#cb61-450" aria-hidden="true" tabindex="-1"></a>This chart is more helpful, but it gets hard to see all of the different topics. Still, it helps us to see which topics may change over the month. I got the idea for the facet wrap <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.tidytextmining.com/topicmodeling.html)</span></span>
<span id="cb61-451"><a href="#cb61-451" aria-hidden="true" tabindex="-1"></a><span class="fu">## All topics line chart</span></span>
<span id="cb61-452"><a href="#cb61-452" aria-hidden="true" tabindex="-1"></a><span class="in">```{r line_chart_facet_wrap}</span></span>
<span id="cb61-453"><a href="#cb61-453" aria-hidden="true" tabindex="-1"></a><span class="co"># Line chart</span></span>
<span id="cb61-454"><a href="#cb61-454" aria-hidden="true" tabindex="-1"></a>moneyshot_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(vizDataFrame20y, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-455"><a href="#cb61-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-456"><a href="#cb61-456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-457"><a href="#cb61-457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topics by day in r/foodstamps"</span>,</span>
<span id="cb61-458"><a href="#cb61-458" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-459"><a href="#cb61-459" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-460"><a href="#cb61-460" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-461"><a href="#cb61-461" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-462"><a href="#cb61-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">"variable"</span>) </span>
<span id="cb61-463"><a href="#cb61-463" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-464"><a href="#cb61-464" aria-hidden="true" tabindex="-1"></a>moneyshot_1 <span class="ot">&lt;-</span> moneyshot_1 <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="co"># Adding a dashed line at the 10th day of the month when SNAP money in California stops being disbursed</span></span>
<span id="cb61-465"><a href="#cb61-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-466"><a href="#cb61-466" aria-hidden="true" tabindex="-1"></a>moneyshot_1</span>
<span id="cb61-467"><a href="#cb61-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-468"><a href="#cb61-468" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"money_shot_1_15_topics.png"</span>, moneyshot_1, <span class="at">width =</span> <span class="dv">6</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">dpi =</span> <span class="dv">600</span>)</span>
<span id="cb61-469"><a href="#cb61-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-470"><a href="#cb61-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-471"><a href="#cb61-471" aria-hidden="true" tabindex="-1"></a>The charts that we are most interested in allow us to zoom in on a particular topic. So let's do that!</span>
<span id="cb61-472"><a href="#cb61-472" aria-hidden="true" tabindex="-1"></a><span class="fu">## Line charts of individual topics</span></span>
<span id="cb61-473"><a href="#cb61-473" aria-hidden="true" tabindex="-1"></a><span class="fu">### Topic 1</span></span>
<span id="cb61-474"><a href="#cb61-474" aria-hidden="true" tabindex="-1"></a>Zooming in on topic 1. We are filtering our chart from above to focus on topic 1. </span>
<span id="cb61-475"><a href="#cb61-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r topic_1_chart}</span></span>
<span id="cb61-476"><a href="#cb61-476" aria-hidden="true" tabindex="-1"></a>topic_1 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb61-477"><a href="#cb61-477" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic1$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb61-478"><a href="#cb61-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-479"><a href="#cb61-479" aria-hidden="true" tabindex="-1"></a>topic_1_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_1, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-480"><a href="#cb61-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-481"><a href="#cb61-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-482"><a href="#cb61-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 1 by day in r/foodstamps"</span>,</span>
<span id="cb61-483"><a href="#cb61-483" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-484"><a href="#cb61-484" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-485"><a href="#cb61-485" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-486"><a href="#cb61-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-487"><a href="#cb61-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb61-488"><a href="#cb61-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-489"><a href="#cb61-489" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_1_chart_rdd)</span>
<span id="cb61-490"><a href="#cb61-490" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-491"><a href="#cb61-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-492"><a href="#cb61-492" aria-hidden="true" tabindex="-1"></a><span class="fu">### Topic 2</span></span>
<span id="cb61-495"><a href="#cb61-495" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-496"><a href="#cb61-496" aria-hidden="true" tabindex="-1"></a>topic_2 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb61-497"><a href="#cb61-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic2$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb61-498"><a href="#cb61-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-499"><a href="#cb61-499" aria-hidden="true" tabindex="-1"></a>topic_2_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_2, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-500"><a href="#cb61-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-501"><a href="#cb61-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-502"><a href="#cb61-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 2 by day in r/foodstamps"</span>,</span>
<span id="cb61-503"><a href="#cb61-503" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-504"><a href="#cb61-504" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-505"><a href="#cb61-505" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-506"><a href="#cb61-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-507"><a href="#cb61-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb61-508"><a href="#cb61-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-509"><a href="#cb61-509" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_2_chart_rdd)</span>
<span id="cb61-510"><a href="#cb61-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-511"><a href="#cb61-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-512"><a href="#cb61-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-513"><a href="#cb61-513" aria-hidden="true" tabindex="-1"></a><span class="fu">### Topic 6</span></span>
<span id="cb61-514"><a href="#cb61-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r topic_6_chart}</span></span>
<span id="cb61-515"><a href="#cb61-515" aria-hidden="true" tabindex="-1"></a>topic_6 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb61-516"><a href="#cb61-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic6$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb61-517"><a href="#cb61-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-518"><a href="#cb61-518" aria-hidden="true" tabindex="-1"></a>topic_6_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_6, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-519"><a href="#cb61-519" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-520"><a href="#cb61-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-521"><a href="#cb61-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 6 by day in r/foodstamps"</span>,</span>
<span id="cb61-522"><a href="#cb61-522" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-523"><a href="#cb61-523" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-524"><a href="#cb61-524" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-525"><a href="#cb61-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-526"><a href="#cb61-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb61-527"><a href="#cb61-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-528"><a href="#cb61-528" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_6_chart_rdd)</span>
<span id="cb61-529"><a href="#cb61-529" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-530"><a href="#cb61-530" aria-hidden="true" tabindex="-1"></a><span class="fu">### Topic 9</span></span>
<span id="cb61-533"><a href="#cb61-533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-534"><a href="#cb61-534" aria-hidden="true" tabindex="-1"></a>topic_9 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb61-535"><a href="#cb61-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic9$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb61-536"><a href="#cb61-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-537"><a href="#cb61-537" aria-hidden="true" tabindex="-1"></a>topic_9_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_9, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-538"><a href="#cb61-538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-539"><a href="#cb61-539" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-540"><a href="#cb61-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 9 by day in r/foodstamps"</span>,</span>
<span id="cb61-541"><a href="#cb61-541" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-542"><a href="#cb61-542" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-543"><a href="#cb61-543" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-544"><a href="#cb61-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-545"><a href="#cb61-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb61-546"><a href="#cb61-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-547"><a href="#cb61-547" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_9_chart_rdd)</span>
<span id="cb61-548"><a href="#cb61-548" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-549"><a href="#cb61-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-550"><a href="#cb61-550" aria-hidden="true" tabindex="-1"></a><span class="fu">### Topic 11</span></span>
<span id="cb61-551"><a href="#cb61-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r topic_11_chart}</span></span>
<span id="cb61-552"><a href="#cb61-552" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting out topic 11</span></span>
<span id="cb61-553"><a href="#cb61-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-554"><a href="#cb61-554" aria-hidden="true" tabindex="-1"></a>topic_11 <span class="ot">&lt;-</span> vizDataFrame20y <span class="sc">%&gt;%</span> </span>
<span id="cb61-555"><a href="#cb61-555" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"^Topic11$"</span>, variable, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb61-556"><a href="#cb61-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-557"><a href="#cb61-557" aria-hidden="true" tabindex="-1"></a>topic_11_chart_rdd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(topic_11, <span class="fu">aes</span>(<span class="at">x=</span>day,<span class="at">y=</span>value, <span class="at">color =</span> variable, <span class="at">group =</span> variable)) <span class="sc">+</span></span>
<span id="cb61-558"><a href="#cb61-558" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-559"><a href="#cb61-559" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb61-560"><a href="#cb61-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Topic 11 by day in r/foodstamps"</span>,</span>
<span id="cb61-561"><a href="#cb61-561" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">"Posts that mention California"</span>,</span>
<span id="cb61-562"><a href="#cb61-562" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Expected Topic Proportion"</span>,</span>
<span id="cb61-563"><a href="#cb61-563" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Day of the month"</span>) <span class="sc">+</span></span>
<span id="cb61-564"><a href="#cb61-564" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb61-565"><a href="#cb61-565" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span>
<span id="cb61-566"><a href="#cb61-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-567"><a href="#cb61-567" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(topic_11_chart_rdd)</span>
<span id="cb61-568"><a href="#cb61-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-569"><a href="#cb61-569" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-570"><a href="#cb61-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-571"><a href="#cb61-571" aria-hidden="true" tabindex="-1"></a>While I could share the graphs for every topic, I think that these results are highly suggestive that there is some variation happening within the month that is influenced by external variables. For instance, perhaps the results of some topics are higher as the month draws to a close and rent comes due. Additionally, it is highly suggested by the charts that some topics are more prevalent during the first ten days of the month, suggesting the influence of the disbursal date on the topics within the subreddit. </span>
<span id="cb61-572"><a href="#cb61-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-573"><a href="#cb61-573" aria-hidden="true" tabindex="-1"></a>Moreover, rudimentary qualitative analysis of the different topics suggests that the topics are semantically coherent and suggestive of the different concerns that posters have. For instance, topic 9's FREX words suggest concerns with verification, and topic 13's suggest the concerns of students. </span>
<span id="cb61-574"><a href="#cb61-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-575"><a href="#cb61-575" aria-hidden="true" tabindex="-1"></a>Regression discontinuity design may be one way to move this project forward, as it allows for the development of statistical methods to measure how a variable changes over time in response to another variable. It could be a good fit in this case since we know how and when within each month the SNAP benefits are disbursed. This would allow for saying with certainty the precise way in which the topics change over time during each month. </span>
<span id="cb61-576"><a href="#cb61-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-577"><a href="#cb61-577" aria-hidden="true" tabindex="-1"></a>Ultimately, additional work needs to be done to qualitatively analyze the posts within each topic to understand each topic's potential semantic meaning. Moreover, interviews with caseworkers and policy analysts who participate in the forum would be helpful in understanding how they perceive their role in the forum, and would contribute to the development of tactical technical communication as a concept. </span>
<span id="cb61-578"><a href="#cb61-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-579"><a href="#cb61-579" aria-hidden="true" tabindex="-1"></a>Many businesses today, as well as technical communication as a discipline, are turning away from more formalized communications and towards user forums and documentation for issues. If it is indeed true that users are posting in r/foodstamps to receive assistance, it could be beneficial for states and government agencies to either participate in the forum themselves, or develop their own forums for users to post in. </span>
<span id="cb61-580"><a href="#cb61-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-581"><a href="#cb61-581" aria-hidden="true" tabindex="-1"></a><span class="fu"># Importance</span></span>
<span id="cb61-582"><a href="#cb61-582" aria-hidden="true" tabindex="-1"></a>This project has highlighted how quantitative and computational approaches to social media data may be of use to technical communicators and government agencies. SNAP users are vulnerable and low-income, and may have recently experienced challenging life circumstances. It is therefore important to treat these users with respect and make their lives easier. SNAP benefits matter to them, and they help them make ends meet. Moreover, SNAP participation and uptake is associated with better <span class="co">[</span><span class="ot">life outcomes and lower health care costs</span><span class="co">](https://www.cbpp.org/research/snap-is-linked-with-improved-nutritional-outcomes-and-lower-health-care-costs)</span>. If governments and agencies can improve SNAP take up and improve the efficiency of program administration, that may benefit the bottom line of states and the federal government through reduced spending on other programs. </span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>